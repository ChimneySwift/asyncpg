

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>API Reference &mdash; asyncpg Documentation</title>
  

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/theme_overrides.css" type="text/css" />

  
  

  
  

  

  
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Frequently Asked Questions" href="../faq.html" />
    <link rel="prev" title="asyncpg Usage" href="../usage.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home"> asyncpg
          

          
          </a>

          
            
            
              <div class="version">
                0.27.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../usage.html">asyncpg Usage</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">API Reference</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#connection">Connection</a></li>
<li class="toctree-l2"><a class="reference internal" href="#prepared-statements">Prepared Statements</a></li>
<li class="toctree-l2"><a class="reference internal" href="#transactions">Transactions</a></li>
<li class="toctree-l2"><a class="reference internal" href="#cursors">Cursors</a></li>
<li class="toctree-l2"><a class="reference internal" href="#connection-pools">Connection Pools</a></li>
<li class="toctree-l2"><a class="reference internal" href="#record-objects">Record Objects</a></li>
<li class="toctree-l2"><a class="reference internal" href="#module-asyncpg.types">Data Types</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../faq.html">Frequently Asked Questions</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">asyncpg</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
        
      <li>API Reference</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="module-asyncpg">
<span id="api-reference"></span><span id="asyncpg-api-reference"></span><h1>API Reference<a class="headerlink" href="#module-asyncpg" title="Permalink to this headline">¶</a></h1>
<div class="section" id="connection">
<span id="asyncpg-api-connection"></span><h2>Connection<a class="headerlink" href="#connection" title="Permalink to this headline">¶</a></h2>
<dl class="py function">
<dt class="sig sig-object py" id="asyncpg.connection.connect">
<em class="property"><span class="pre">async</span> </em><span class="sig-name descname"><span class="pre">connect</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="pre">dsn=None</span></em>, <em class="sig-param"><span class="pre">*</span></em>, <em class="sig-param"><span class="pre">host=None</span></em>, <em class="sig-param"><span class="pre">port=None</span></em>, <em class="sig-param"><span class="pre">user=None</span></em>, <em class="sig-param"><span class="pre">password=None</span></em>, <em class="sig-param"><span class="pre">passfile=None</span></em>, <em class="sig-param"><span class="pre">database=None</span></em>, <em class="sig-param"><span class="pre">loop=None</span></em>, <em class="sig-param"><span class="pre">timeout=60</span></em>, <em class="sig-param"><span class="pre">statement_cache_size=100</span></em>, <em class="sig-param"><span class="pre">max_cached_statement_lifetime=300</span></em>, <em class="sig-param"><span class="pre">max_cacheable_statement_size=15360</span></em>, <em class="sig-param"><span class="pre">command_timeout=None</span></em>, <em class="sig-param"><span class="pre">ssl=None</span></em>, <em class="sig-param"><span class="pre">direct_tls=False</span></em>, <em class="sig-param"><span class="pre">connection_class=&lt;class</span> <span class="pre">'asyncpg.connection.Connection'&gt;</span></em>, <em class="sig-param"><span class="pre">record_class=&lt;class</span> <span class="pre">'asyncpg.Record'&gt;</span></em>, <em class="sig-param"><span class="pre">server_settings=None</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/asyncpg/connection.html#connect"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#asyncpg.connection.connect" title="Permalink to this definition">¶</a></dt>
<dd><p>A coroutine to establish a connection to a PostgreSQL server.</p>
<p>The connection parameters may be specified either as a connection
URI in <em>dsn</em>, or as specific keyword arguments, or both.
If both <em>dsn</em> and keyword arguments are specified, the latter
override the corresponding values parsed from the connection URI.
The default values for the majority of arguments can be specified
using <a class="reference external" href="https://www.postgresql.org/docs/current/static/libpq-envars.html">environment variables</a>.</p>
<p>Returns a new <a class="reference internal" href="#asyncpg.connection.Connection" title="asyncpg.connection.Connection"><code class="xref py py-class docutils literal notranslate"><span class="pre">Connection</span></code></a> object.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>dsn</strong> – <p>Connection arguments specified using as a single string in the
<a class="reference external" href="https://www.postgresql.org/docs/current/static/libpq-connect.html#LIBPQ-CONNSTRING">libpq connection URI format</a>:
<code class="docutils literal notranslate"><span class="pre">postgres://user:password&#64;host:port/database?option=value</span></code>.
The following options are recognized by asyncpg: <code class="docutils literal notranslate"><span class="pre">host</span></code>,
<code class="docutils literal notranslate"><span class="pre">port</span></code>, <code class="docutils literal notranslate"><span class="pre">user</span></code>, <code class="docutils literal notranslate"><span class="pre">database</span></code> (or <code class="docutils literal notranslate"><span class="pre">dbname</span></code>), <code class="docutils literal notranslate"><span class="pre">password</span></code>,
<code class="docutils literal notranslate"><span class="pre">passfile</span></code>, <code class="docutils literal notranslate"><span class="pre">sslmode</span></code>, <code class="docutils literal notranslate"><span class="pre">sslcert</span></code>, <code class="docutils literal notranslate"><span class="pre">sslkey</span></code>, <code class="docutils literal notranslate"><span class="pre">sslrootcert</span></code>,
and <code class="docutils literal notranslate"><span class="pre">sslcrl</span></code>.  Unlike libpq, asyncpg will treat unrecognized
options as <a class="reference external" href="https://www.postgresql.org/docs/current/static/runtime-config.html">server settings</a> to be used for the connection.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The URI must be <em>valid</em>, which means that all components must
be properly quoted with <a class="reference external" href="https://docs.python.org/3/library/urllib.parse.html#urllib.parse.quote" title="(in Python v3.10)"><code class="xref py py-func docutils literal notranslate"><span class="pre">urllib.parse.quote()</span></code></a>, and
any literal IPv6 addresses must be enclosed in square brackets.
For example:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>postgres://dbuser@[fe80::1ff:fe23:4567:890a%25eth0]/dbname
</pre></div>
</div>
</div>
</p></li>
<li><p><strong>host</strong> – <p>Database host address as one of the following:</p>
<ul>
<li><p>an IP address or a domain name;</p></li>
<li><p>an absolute path to the directory containing the database
server Unix-domain socket (not supported on Windows);</p></li>
<li><p>a sequence of any of the above, in which case the addresses
will be tried in order, and the first successful connection
will be returned.</p></li>
</ul>
<p>If not specified, asyncpg will try the following, in order:</p>
<ul>
<li><p>host address(es) parsed from the <em>dsn</em> argument,</p></li>
<li><p>the value of the <code class="docutils literal notranslate"><span class="pre">PGHOST</span></code> environment variable,</p></li>
<li><p>on Unix, common directories used for PostgreSQL Unix-domain
sockets: <code class="docutils literal notranslate"><span class="pre">&quot;/run/postgresql&quot;</span></code>, <code class="docutils literal notranslate"><span class="pre">&quot;/var/run/postgresl&quot;</span></code>,
<code class="docutils literal notranslate"><span class="pre">&quot;/var/pgsql_socket&quot;</span></code>, <code class="docutils literal notranslate"><span class="pre">&quot;/private/tmp&quot;</span></code>, and <code class="docutils literal notranslate"><span class="pre">&quot;/tmp&quot;</span></code>,</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">&quot;localhost&quot;</span></code>.</p></li>
</ul>
</p></li>
<li><p><strong>port</strong> – <p>Port number to connect to at the server host
(or Unix-domain socket file extension).  If multiple host
addresses were specified, this parameter may specify a
sequence of port numbers of the same length as the host sequence,
or it may specify a single port number to be used for all host
addresses.</p>
<p>If not specified, the value parsed from the <em>dsn</em> argument is used,
or the value of the <code class="docutils literal notranslate"><span class="pre">PGPORT</span></code> environment variable, or <code class="docutils literal notranslate"><span class="pre">5432</span></code> if
neither is specified.</p>
</p></li>
<li><p><strong>user</strong> – <p>The name of the database role used for authentication.</p>
<p>If not specified, the value parsed from the <em>dsn</em> argument is used,
or the value of the <code class="docutils literal notranslate"><span class="pre">PGUSER</span></code> environment variable, or the
operating system name of the user running the application.</p>
</p></li>
<li><p><strong>database</strong> – <p>The name of the database to connect to.</p>
<p>If not specified, the value parsed from the <em>dsn</em> argument is used,
or the value of the <code class="docutils literal notranslate"><span class="pre">PGDATABASE</span></code> environment variable, or the
computed value of the <em>user</em> argument.</p>
</p></li>
<li><p><strong>password</strong> – <p>Password to be used for authentication, if the server requires
one.  If not specified, the value parsed from the <em>dsn</em> argument
is used, or the value of the <code class="docutils literal notranslate"><span class="pre">PGPASSWORD</span></code> environment variable.
Note that the use of the environment variable is discouraged as
other users and applications may be able to read it without needing
specific privileges.  It is recommended to use <em>passfile</em> instead.</p>
<p>Password may be either a string, or a callable that returns a string.
If a callable is provided, it will be called each time a new connection
is established.</p>
</p></li>
<li><p><strong>passfile</strong> – The name of the file used to store passwords
(defaults to <code class="docutils literal notranslate"><span class="pre">~/.pgpass</span></code>, or <code class="docutils literal notranslate"><span class="pre">%APPDATA%\postgresql\pgpass.conf</span></code>
on Windows).</p></li>
<li><p><strong>loop</strong> – An asyncio event loop instance.  If <code class="docutils literal notranslate"><span class="pre">None</span></code>, the default
event loop will be used.</p></li>
<li><p><strong>timeout</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.10)"><em>float</em></a>) – Connection timeout in seconds.</p></li>
<li><p><strong>statement_cache_size</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)"><em>int</em></a>) – The size of prepared statement LRU cache.  Pass <code class="docutils literal notranslate"><span class="pre">0</span></code> to
disable the cache.</p></li>
<li><p><strong>max_cached_statement_lifetime</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)"><em>int</em></a>) – The maximum time in seconds a prepared statement will stay
in the cache.  Pass <code class="docutils literal notranslate"><span class="pre">0</span></code> to allow statements be cached
indefinitely.</p></li>
<li><p><strong>max_cacheable_statement_size</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)"><em>int</em></a>) – The maximum size of a statement that can be cached (15KiB by
default).  Pass <code class="docutils literal notranslate"><span class="pre">0</span></code> to allow all statements to be cached
regardless of their size.</p></li>
<li><p><strong>command_timeout</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.10)"><em>float</em></a>) – The default timeout for operations on this connection
(the default is <code class="docutils literal notranslate"><span class="pre">None</span></code>: no timeout).</p></li>
<li><p><strong>ssl</strong> – <p>Pass <code class="docutils literal notranslate"><span class="pre">True</span></code> or an <a class="reference external" href="https://docs.python.org/3/library/ssl.html#ssl.SSLContext">ssl.SSLContext</a> instance to
require an SSL connection.  If <code class="docutils literal notranslate"><span class="pre">True</span></code>, a default SSL context
returned by <a class="reference external" href="https://docs.python.org/3/library/ssl.html#ssl.create_default_context">ssl.create_default_context()</a>
will be used.  The value can also be one of the following strings:</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">'disable'</span></code> - SSL is disabled (equivalent to <code class="docutils literal notranslate"><span class="pre">False</span></code>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">'prefer'</span></code> - try SSL first, fallback to non-SSL connection
if SSL connection fails</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">'allow'</span></code> - try without SSL first, then retry with SSL if the first
attempt fails.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">'require'</span></code> - only try an SSL connection.  Certificate
verification errors are ignored</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">'verify-ca'</span></code> - only try an SSL connection, and verify
that the server certificate is issued by a trusted certificate
authority (CA)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">'verify-full'</span></code> - only try an SSL connection, verify
that the server certificate is issued by a trusted CA and
that the requested server host name matches that in the
certificate.</p></li>
</ul>
<p>The default is <code class="docutils literal notranslate"><span class="pre">'prefer'</span></code>: try an SSL connection and fallback to
non-SSL connection if that fails.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p><em>ssl</em> is ignored for Unix domain socket communication.</p>
</div>
<p>Example of programmatic SSL context configuration that is equivalent
to <code class="docutils literal notranslate"><span class="pre">sslmode=verify-full&amp;sslcert=..&amp;sslkey=..&amp;sslrootcert=..</span></code>:</p>
<div class="highlight-pycon notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">asyncpg</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">asyncio</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">ssl</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">async</span> <span class="k">def</span> <span class="nf">main</span><span class="p">():</span>
<span class="gp">... </span>    <span class="c1"># Load CA bundle for server certificate verification,</span>
<span class="gp">... </span>    <span class="c1"># equivalent to sslrootcert= in DSN.</span>
<span class="gp">... </span>    <span class="n">sslctx</span> <span class="o">=</span> <span class="n">ssl</span><span class="o">.</span><span class="n">create_default_context</span><span class="p">(</span>
<span class="gp">... </span>        <span class="n">ssl</span><span class="o">.</span><span class="n">Purpose</span><span class="o">.</span><span class="n">SERVER_AUTH</span><span class="p">,</span>
<span class="gp">... </span>        <span class="n">cafile</span><span class="o">=</span><span class="s2">&quot;path/to/ca_bundle.pem&quot;</span><span class="p">)</span>
<span class="gp">... </span>    <span class="c1"># If True, equivalent to sslmode=verify-full, if False:</span>
<span class="gp">... </span>    <span class="c1"># sslmode=verify-ca.</span>
<span class="gp">... </span>    <span class="n">sslctx</span><span class="o">.</span><span class="n">check_hostname</span> <span class="o">=</span> <span class="kc">True</span>
<span class="gp">... </span>    <span class="c1"># Load client certificate and private key for client</span>
<span class="gp">... </span>    <span class="c1"># authentication, equivalent to sslcert= and sslkey= in</span>
<span class="gp">... </span>    <span class="c1"># DSN.</span>
<span class="gp">... </span>    <span class="n">sslctx</span><span class="o">.</span><span class="n">load_cert_chain</span><span class="p">(</span>
<span class="gp">... </span>        <span class="s2">&quot;path/to/client.cert&quot;</span><span class="p">,</span>
<span class="gp">... </span>        <span class="n">keyfile</span><span class="o">=</span><span class="s2">&quot;path/to/client.key&quot;</span><span class="p">,</span>
<span class="gp">... </span>    <span class="p">)</span>
<span class="gp">... </span>    <span class="n">con</span> <span class="o">=</span> <span class="k">await</span> <span class="n">asyncpg</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="n">user</span><span class="o">=</span><span class="s1">&#39;postgres&#39;</span><span class="p">,</span> <span class="n">ssl</span><span class="o">=</span><span class="n">sslctx</span><span class="p">)</span>
<span class="gp">... </span>    <span class="k">await</span> <span class="n">con</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">asyncio</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">run</span><span class="p">())</span>
</pre></div>
</div>
<p>Example of programmatic SSL context configuration that is equivalent
to <code class="docutils literal notranslate"><span class="pre">sslmode=require</span></code> (no server certificate or host verification):</p>
<div class="highlight-pycon notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">asyncpg</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">asyncio</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">ssl</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">async</span> <span class="k">def</span> <span class="nf">main</span><span class="p">():</span>
<span class="gp">... </span>    <span class="n">sslctx</span> <span class="o">=</span> <span class="n">ssl</span><span class="o">.</span><span class="n">create_default_context</span><span class="p">(</span>
<span class="gp">... </span>        <span class="n">ssl</span><span class="o">.</span><span class="n">Purpose</span><span class="o">.</span><span class="n">SERVER_AUTH</span><span class="p">)</span>
<span class="gp">... </span>    <span class="n">sslctx</span><span class="o">.</span><span class="n">check_hostname</span> <span class="o">=</span> <span class="kc">False</span>
<span class="gp">... </span>    <span class="n">sslctx</span><span class="o">.</span><span class="n">verify_mode</span> <span class="o">=</span> <span class="n">ssl</span><span class="o">.</span><span class="n">CERT_NONE</span>
<span class="gp">... </span>    <span class="n">con</span> <span class="o">=</span> <span class="k">await</span> <span class="n">asyncpg</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="n">user</span><span class="o">=</span><span class="s1">&#39;postgres&#39;</span><span class="p">,</span> <span class="n">ssl</span><span class="o">=</span><span class="n">sslctx</span><span class="p">)</span>
<span class="gp">... </span>    <span class="k">await</span> <span class="n">con</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">asyncio</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">run</span><span class="p">())</span>
</pre></div>
</div>
</p></li>
<li><p><strong>direct_tls</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.10)"><em>bool</em></a>) – Pass <code class="docutils literal notranslate"><span class="pre">True</span></code> to skip PostgreSQL STARTTLS mode and perform a direct
SSL connection. Must be used alongside <code class="docutils literal notranslate"><span class="pre">ssl</span></code> param.</p></li>
<li><p><strong>server_settings</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.10)"><em>dict</em></a>) – An optional dict of server runtime parameters.  Refer to
PostgreSQL documentation for
a <a class="reference external" href="https://www.postgresql.org/docs/current/static/runtime-config.html">list of supported options</a>.</p></li>
<li><p><strong>connection_class</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#type" title="(in Python v3.10)"><em>type</em></a>) – Class of the returned connection object.  Must be a subclass of
<a class="reference internal" href="#asyncpg.connection.Connection" title="asyncpg.connection.Connection"><code class="xref py py-class docutils literal notranslate"><span class="pre">Connection</span></code></a>.</p></li>
<li><p><strong>record_class</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#type" title="(in Python v3.10)"><em>type</em></a>) – If specified, the class to use for records returned by queries on
this connection object.  Must be a subclass of
<a class="reference internal" href="#asyncpg.Record" title="asyncpg.Record"><code class="xref py py-class docutils literal notranslate"><span class="pre">Record</span></code></a>.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A <a class="reference internal" href="#asyncpg.connection.Connection" title="asyncpg.connection.Connection"><code class="xref py py-class docutils literal notranslate"><span class="pre">Connection</span></code></a> instance.</p>
</dd>
</dl>
<p>Example:</p>
<div class="highlight-pycon notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">asyncpg</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">asyncio</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">async</span> <span class="k">def</span> <span class="nf">run</span><span class="p">():</span>
<span class="gp">... </span>    <span class="n">con</span> <span class="o">=</span> <span class="k">await</span> <span class="n">asyncpg</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="n">user</span><span class="o">=</span><span class="s1">&#39;postgres&#39;</span><span class="p">)</span>
<span class="gp">... </span>    <span class="n">types</span> <span class="o">=</span> <span class="k">await</span> <span class="n">con</span><span class="o">.</span><span class="n">fetch</span><span class="p">(</span><span class="s1">&#39;SELECT * FROM pg_type&#39;</span><span class="p">)</span>
<span class="gp">... </span>    <span class="nb">print</span><span class="p">(</span><span class="n">types</span><span class="p">)</span>
<span class="gp">...</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">asyncio</span><span class="o">.</span><span class="n">get_event_loop</span><span class="p">()</span><span class="o">.</span><span class="n">run_until_complete</span><span class="p">(</span><span class="n">run</span><span class="p">())</span>
<span class="go">[&lt;Record typname=&#39;bool&#39; typnamespace=11 ...</span>
</pre></div>
</div>
<div class="versionadded">
<p><span class="versionmodified added">New in version 0.10.0: </span>Added <code class="docutils literal notranslate"><span class="pre">max_cached_statement_use_count</span></code> parameter.</p>
</div>
<div class="versionchanged">
<p><span class="versionmodified changed">Changed in version 0.11.0: </span>Removed ability to pass arbitrary keyword arguments to set
server settings.  Added a dedicated parameter <code class="docutils literal notranslate"><span class="pre">server_settings</span></code>
for that.</p>
</div>
<div class="versionadded">
<p><span class="versionmodified added">New in version 0.11.0: </span>Added <code class="docutils literal notranslate"><span class="pre">connection_class</span></code> parameter.</p>
</div>
<div class="versionadded">
<p><span class="versionmodified added">New in version 0.16.0: </span>Added <code class="docutils literal notranslate"><span class="pre">passfile</span></code> parameter
(and support for password files in general).</p>
</div>
<div class="versionadded">
<p><span class="versionmodified added">New in version 0.18.0: </span>Added ability to specify multiple hosts in the <em>dsn</em>
and <em>host</em> arguments.</p>
</div>
<div class="versionchanged">
<p><span class="versionmodified changed">Changed in version 0.21.0: </span>The <em>password</em> argument now accepts a callable or an async function.</p>
</div>
<div class="versionchanged">
<p><span class="versionmodified changed">Changed in version 0.22.0: </span>Added the <em>record_class</em> parameter.</p>
</div>
<div class="versionchanged">
<p><span class="versionmodified changed">Changed in version 0.22.0: </span>The <em>ssl</em> argument now defaults to <code class="docutils literal notranslate"><span class="pre">'prefer'</span></code>.</p>
</div>
<div class="versionchanged">
<p><span class="versionmodified changed">Changed in version 0.24.0: </span>The <code class="docutils literal notranslate"><span class="pre">sslcert</span></code>, <code class="docutils literal notranslate"><span class="pre">sslkey</span></code>, <code class="docutils literal notranslate"><span class="pre">sslrootcert</span></code>, and <code class="docutils literal notranslate"><span class="pre">sslcrl</span></code> options
are supported in the <em>dsn</em> argument.</p>
</div>
<div class="versionchanged">
<p><span class="versionmodified changed">Changed in version 0.25.0: </span>The <code class="docutils literal notranslate"><span class="pre">sslpassword</span></code>, <code class="docutils literal notranslate"><span class="pre">ssl_min_protocol_version</span></code>,
and <code class="docutils literal notranslate"><span class="pre">ssl_max_protocol_version</span></code> options are supported in the <em>dsn</em>
argument.</p>
</div>
<div class="versionchanged">
<p><span class="versionmodified changed">Changed in version 0.25.0: </span>Default system root CA certificates won’t be loaded when specifying a
particular sslmode, following the same behavior in libpq.</p>
</div>
<div class="versionchanged">
<p><span class="versionmodified changed">Changed in version 0.25.0: </span>The <code class="docutils literal notranslate"><span class="pre">sslcert</span></code>, <code class="docutils literal notranslate"><span class="pre">sslkey</span></code>, <code class="docutils literal notranslate"><span class="pre">sslrootcert</span></code>, and <code class="docutils literal notranslate"><span class="pre">sslcrl</span></code> options
in the <em>dsn</em> argument now have consistent default values of files under
<code class="docutils literal notranslate"><span class="pre">~/.postgresql/</span></code> as libpq.</p>
</div>
<div class="versionchanged">
<p><span class="versionmodified changed">Changed in version 0.26.0: </span>Added the <em>direct_tls</em> parameter.</p>
</div>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="asyncpg.connection.Connection">
<em class="property"><span class="pre">class</span> </em><span class="sig-name descname"><span class="pre">Connection</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">protocol</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">transport</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">loop</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">addr</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">config</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">asyncpg.connect_utils.ConnectionConfiguration</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">params</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">asyncpg.connect_utils.ConnectionParameters</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/asyncpg/connection.html#Connection"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#asyncpg.connection.Connection" title="Permalink to this definition">¶</a></dt>
<dd><p>A representation of a database session.</p>
<p>Connections are created by calling <a class="reference internal" href="#asyncpg.connection.connect" title="asyncpg.connection.connect"><code class="xref py py-func docutils literal notranslate"><span class="pre">connect()</span></code></a>.</p>
<dl class="py method">
<dt class="sig sig-object py" id="asyncpg.connection.Connection.add_listener">
<em class="property"><span class="pre">coroutine</span> </em><span class="sig-name descname"><span class="pre">add_listener</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">channel</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">callback</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/asyncpg/connection.html#Connection.add_listener"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#asyncpg.connection.Connection.add_listener" title="Permalink to this definition">¶</a></dt>
<dd><p>Add a listener for Postgres notifications.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>channel</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><em>str</em></a>) – Channel to listen on.</p></li>
<li><p><strong>callback</strong> (<em>callable</em>) – A callable or a coroutine function receiving the following
arguments:
<strong>connection</strong>: a Connection the callback is registered with;
<strong>pid</strong>: PID of the Postgres server that sent the notification;
<strong>channel</strong>: name of the channel the notification was sent to;
<strong>payload</strong>: the payload.</p></li>
</ul>
</dd>
</dl>
<div class="versionchanged">
<p><span class="versionmodified changed">Changed in version 0.24.0: </span>The <code class="docutils literal notranslate"><span class="pre">callback</span></code> argument may be a coroutine function.</p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="asyncpg.connection.Connection.add_log_listener">
<span class="sig-name descname"><span class="pre">add_log_listener</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">callback</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/asyncpg/connection.html#Connection.add_log_listener"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#asyncpg.connection.Connection.add_log_listener" title="Permalink to this definition">¶</a></dt>
<dd><p>Add a listener for Postgres log messages.</p>
<p>It will be called when asyncronous NoticeResponse is received
from the connection.  Possible message types are: WARNING, NOTICE,
DEBUG, INFO, or LOG.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>callback</strong> (<em>callable</em>) – A callable or a coroutine function receiving the following
arguments:
<strong>connection</strong>: a Connection the callback is registered with;
<strong>message</strong>: the <cite>exceptions.PostgresLogMessage</cite> message.</p>
</dd>
</dl>
<div class="versionadded">
<p><span class="versionmodified added">New in version 0.12.0.</span></p>
</div>
<div class="versionchanged">
<p><span class="versionmodified changed">Changed in version 0.24.0: </span>The <code class="docutils literal notranslate"><span class="pre">callback</span></code> argument may be a coroutine function.</p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="asyncpg.connection.Connection.add_termination_listener">
<span class="sig-name descname"><span class="pre">add_termination_listener</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">callback</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/asyncpg/connection.html#Connection.add_termination_listener"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#asyncpg.connection.Connection.add_termination_listener" title="Permalink to this definition">¶</a></dt>
<dd><p>Add a listener that will be called when the connection is closed.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>callback</strong> (<em>callable</em>) – A callable or a coroutine function receiving one argument:
<strong>connection</strong>: a Connection the callback is registered with.</p>
</dd>
</dl>
<div class="versionadded">
<p><span class="versionmodified added">New in version 0.21.0.</span></p>
</div>
<div class="versionchanged">
<p><span class="versionmodified changed">Changed in version 0.24.0: </span>The <code class="docutils literal notranslate"><span class="pre">callback</span></code> argument may be a coroutine function.</p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="asyncpg.connection.Connection.close">
<em class="property"><span class="pre">coroutine</span> </em><span class="sig-name descname"><span class="pre">close</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">timeout</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/asyncpg/connection.html#Connection.close"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#asyncpg.connection.Connection.close" title="Permalink to this definition">¶</a></dt>
<dd><p>Close the connection gracefully.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>timeout</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.10)"><em>float</em></a>) – Optional timeout value in seconds.</p>
</dd>
</dl>
<div class="versionchanged">
<p><span class="versionmodified changed">Changed in version 0.14.0: </span>Added the <em>timeout</em> parameter.</p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="asyncpg.connection.Connection.copy_from_query">
<em class="property"><span class="pre">coroutine</span> </em><span class="sig-name descname"><span class="pre">copy_from_query</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">query</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">output</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">timeout</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">format</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">oids</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">delimiter</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">null</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">header</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">quote</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">escape</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">force_quote</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">encoding</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/asyncpg/connection.html#Connection.copy_from_query"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#asyncpg.connection.Connection.copy_from_query" title="Permalink to this definition">¶</a></dt>
<dd><p>Copy the results of a query to a file or file-like object.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>query</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><em>str</em></a>) – The query to copy the results of.</p></li>
<li><p><strong>args</strong> – Query arguments.</p></li>
<li><p><strong>output</strong> – A <a class="reference external" href="https://docs.python.org/3/glossary.html#term-path-like-object" title="(in Python v3.10)"><span class="xref std std-term">path-like object</span></a>,
or a <a class="reference external" href="https://docs.python.org/3/glossary.html#term-file-like-object" title="(in Python v3.10)"><span class="xref std std-term">file-like object</span></a>, or
a <a class="reference external" href="https://docs.python.org/3/glossary.html#term-coroutine-function" title="(in Python v3.10)"><span class="xref std std-term">coroutine function</span></a>
that takes a <code class="docutils literal notranslate"><span class="pre">bytes</span></code> instance as a sole argument.</p></li>
<li><p><strong>timeout</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.10)"><em>float</em></a>) – Optional timeout value in seconds.</p></li>
</ul>
</dd>
</dl>
<p>The remaining keyword arguments are <code class="docutils literal notranslate"><span class="pre">COPY</span></code> statement options,
see <a class="reference external" href="https://www.postgresql.org/docs/current/static/sql-copy.html">COPY statement documentation</a> for details.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>The status string of the COPY command.</p>
</dd>
</dl>
<p>Example:</p>
<div class="highlight-pycon notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">asyncpg</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">asyncio</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">async</span> <span class="k">def</span> <span class="nf">run</span><span class="p">():</span>
<span class="gp">... </span>    <span class="n">con</span> <span class="o">=</span> <span class="k">await</span> <span class="n">asyncpg</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="n">user</span><span class="o">=</span><span class="s1">&#39;postgres&#39;</span><span class="p">)</span>
<span class="gp">... </span>    <span class="n">result</span> <span class="o">=</span> <span class="k">await</span> <span class="n">con</span><span class="o">.</span><span class="n">copy_from_query</span><span class="p">(</span>
<span class="gp">... </span>        <span class="s1">&#39;SELECT foo, bar FROM mytable WHERE foo &gt; $1&#39;</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span>
<span class="gp">... </span>        <span class="n">output</span><span class="o">=</span><span class="s1">&#39;file.csv&#39;</span><span class="p">,</span> <span class="nb">format</span><span class="o">=</span><span class="s1">&#39;csv&#39;</span><span class="p">)</span>
<span class="gp">... </span>    <span class="nb">print</span><span class="p">(</span><span class="n">result</span><span class="p">)</span>
<span class="gp">...</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">asyncio</span><span class="o">.</span><span class="n">get_event_loop</span><span class="p">()</span><span class="o">.</span><span class="n">run_until_complete</span><span class="p">(</span><span class="n">run</span><span class="p">())</span>
<span class="go">&#39;COPY 10&#39;</span>
</pre></div>
</div>
<div class="versionadded">
<p><span class="versionmodified added">New in version 0.11.0.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="asyncpg.connection.Connection.copy_from_table">
<em class="property"><span class="pre">coroutine</span> </em><span class="sig-name descname"><span class="pre">copy_from_table</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">table_name</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">output</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">columns</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">schema_name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">timeout</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">format</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">oids</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">delimiter</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">null</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">header</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">quote</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">escape</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">force_quote</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">encoding</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/asyncpg/connection.html#Connection.copy_from_table"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#asyncpg.connection.Connection.copy_from_table" title="Permalink to this definition">¶</a></dt>
<dd><p>Copy table contents to a file or file-like object.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>table_name</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><em>str</em></a>) – The name of the table to copy data from.</p></li>
<li><p><strong>output</strong> – A <a class="reference external" href="https://docs.python.org/3/glossary.html#term-path-like-object" title="(in Python v3.10)"><span class="xref std std-term">path-like object</span></a>,
or a <a class="reference external" href="https://docs.python.org/3/glossary.html#term-file-like-object" title="(in Python v3.10)"><span class="xref std std-term">file-like object</span></a>, or
a <a class="reference external" href="https://docs.python.org/3/glossary.html#term-coroutine-function" title="(in Python v3.10)"><span class="xref std std-term">coroutine function</span></a>
that takes a <code class="docutils literal notranslate"><span class="pre">bytes</span></code> instance as a sole argument.</p></li>
<li><p><strong>columns</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.10)"><em>list</em></a>) – An optional list of column names to copy.</p></li>
<li><p><strong>schema_name</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><em>str</em></a>) – An optional schema name to qualify the table.</p></li>
<li><p><strong>timeout</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.10)"><em>float</em></a>) – Optional timeout value in seconds.</p></li>
</ul>
</dd>
</dl>
<p>The remaining keyword arguments are <code class="docutils literal notranslate"><span class="pre">COPY</span></code> statement options,
see <a class="reference external" href="https://www.postgresql.org/docs/current/static/sql-copy.html">COPY statement documentation</a> for details.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>The status string of the COPY command.</p>
</dd>
</dl>
<p>Example:</p>
<div class="highlight-pycon notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">asyncpg</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">asyncio</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">async</span> <span class="k">def</span> <span class="nf">run</span><span class="p">():</span>
<span class="gp">... </span>    <span class="n">con</span> <span class="o">=</span> <span class="k">await</span> <span class="n">asyncpg</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="n">user</span><span class="o">=</span><span class="s1">&#39;postgres&#39;</span><span class="p">)</span>
<span class="gp">... </span>    <span class="n">result</span> <span class="o">=</span> <span class="k">await</span> <span class="n">con</span><span class="o">.</span><span class="n">copy_from_table</span><span class="p">(</span>
<span class="gp">... </span>        <span class="s1">&#39;mytable&#39;</span><span class="p">,</span> <span class="n">columns</span><span class="o">=</span><span class="p">(</span><span class="s1">&#39;foo&#39;</span><span class="p">,</span> <span class="s1">&#39;bar&#39;</span><span class="p">),</span>
<span class="gp">... </span>        <span class="n">output</span><span class="o">=</span><span class="s1">&#39;file.csv&#39;</span><span class="p">,</span> <span class="nb">format</span><span class="o">=</span><span class="s1">&#39;csv&#39;</span><span class="p">)</span>
<span class="gp">... </span>    <span class="nb">print</span><span class="p">(</span><span class="n">result</span><span class="p">)</span>
<span class="gp">...</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">asyncio</span><span class="o">.</span><span class="n">get_event_loop</span><span class="p">()</span><span class="o">.</span><span class="n">run_until_complete</span><span class="p">(</span><span class="n">run</span><span class="p">())</span>
<span class="go">&#39;COPY 100&#39;</span>
</pre></div>
</div>
<div class="versionadded">
<p><span class="versionmodified added">New in version 0.11.0.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="asyncpg.connection.Connection.copy_records_to_table">
<em class="property"><span class="pre">coroutine</span> </em><span class="sig-name descname"><span class="pre">copy_records_to_table</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">table_name</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">records</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">columns</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">schema_name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">timeout</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/asyncpg/connection.html#Connection.copy_records_to_table"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#asyncpg.connection.Connection.copy_records_to_table" title="Permalink to this definition">¶</a></dt>
<dd><p>Copy a list of records to the specified table using binary COPY.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>table_name</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><em>str</em></a>) – The name of the table to copy data to.</p></li>
<li><p><strong>records</strong> – An iterable returning row tuples to copy into the table.
<a class="reference external" href="https://docs.python.org/3/glossary.html#term-asynchronous-iterable" title="(in Python v3.10)"><span class="xref std std-term">Asynchronous iterables</span></a>
are also supported.</p></li>
<li><p><strong>columns</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.10)"><em>list</em></a>) – An optional list of column names to copy.</p></li>
<li><p><strong>schema_name</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><em>str</em></a>) – An optional schema name to qualify the table.</p></li>
<li><p><strong>timeout</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.10)"><em>float</em></a>) – Optional timeout value in seconds.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>The status string of the COPY command.</p>
</dd>
</dl>
<p>Example:</p>
<div class="highlight-pycon notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">asyncpg</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">asyncio</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">async</span> <span class="k">def</span> <span class="nf">run</span><span class="p">():</span>
<span class="gp">... </span>    <span class="n">con</span> <span class="o">=</span> <span class="k">await</span> <span class="n">asyncpg</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="n">user</span><span class="o">=</span><span class="s1">&#39;postgres&#39;</span><span class="p">)</span>
<span class="gp">... </span>    <span class="n">result</span> <span class="o">=</span> <span class="k">await</span> <span class="n">con</span><span class="o">.</span><span class="n">copy_records_to_table</span><span class="p">(</span>
<span class="gp">... </span>        <span class="s1">&#39;mytable&#39;</span><span class="p">,</span> <span class="n">records</span><span class="o">=</span><span class="p">[</span>
<span class="gp">... </span>            <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;foo&#39;</span><span class="p">,</span> <span class="s1">&#39;bar&#39;</span><span class="p">),</span>
<span class="gp">... </span>            <span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="s1">&#39;ham&#39;</span><span class="p">,</span> <span class="s1">&#39;spam&#39;</span><span class="p">)])</span>
<span class="gp">... </span>    <span class="nb">print</span><span class="p">(</span><span class="n">result</span><span class="p">)</span>
<span class="gp">...</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">asyncio</span><span class="o">.</span><span class="n">get_event_loop</span><span class="p">()</span><span class="o">.</span><span class="n">run_until_complete</span><span class="p">(</span><span class="n">run</span><span class="p">())</span>
<span class="go">&#39;COPY 2&#39;</span>
</pre></div>
</div>
<p>Asynchronous record iterables are also supported:</p>
<div class="highlight-pycon notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">asyncpg</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">asyncio</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">async</span> <span class="k">def</span> <span class="nf">run</span><span class="p">():</span>
<span class="gp">... </span>    <span class="n">con</span> <span class="o">=</span> <span class="k">await</span> <span class="n">asyncpg</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="n">user</span><span class="o">=</span><span class="s1">&#39;postgres&#39;</span><span class="p">)</span>
<span class="gp">... </span>    <span class="k">async</span> <span class="k">def</span> <span class="nf">record_gen</span><span class="p">(</span><span class="n">size</span><span class="p">):</span>
<span class="gp">... </span>        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">size</span><span class="p">):</span>
<span class="gp">... </span>            <span class="k">yield</span> <span class="p">(</span><span class="n">i</span><span class="p">,)</span>
<span class="gp">... </span>    <span class="n">result</span> <span class="o">=</span> <span class="k">await</span> <span class="n">con</span><span class="o">.</span><span class="n">copy_records_to_table</span><span class="p">(</span>
<span class="gp">... </span>        <span class="s1">&#39;mytable&#39;</span><span class="p">,</span> <span class="n">records</span><span class="o">=</span><span class="n">record_gen</span><span class="p">(</span><span class="mi">100</span><span class="p">))</span>
<span class="gp">... </span>    <span class="nb">print</span><span class="p">(</span><span class="n">result</span><span class="p">)</span>
<span class="gp">...</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">asyncio</span><span class="o">.</span><span class="n">get_event_loop</span><span class="p">()</span><span class="o">.</span><span class="n">run_until_complete</span><span class="p">(</span><span class="n">run</span><span class="p">())</span>
<span class="go">&#39;COPY 100&#39;</span>
</pre></div>
</div>
<div class="versionadded">
<p><span class="versionmodified added">New in version 0.11.0.</span></p>
</div>
<div class="versionchanged">
<p><span class="versionmodified changed">Changed in version 0.24.0: </span>The <code class="docutils literal notranslate"><span class="pre">records</span></code> argument may be an asynchronous iterable.</p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="asyncpg.connection.Connection.copy_to_table">
<em class="property"><span class="pre">coroutine</span> </em><span class="sig-name descname"><span class="pre">copy_to_table</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">table_name</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">source</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">columns</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">schema_name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">timeout</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">format</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">oids</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">freeze</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">delimiter</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">null</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">header</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">quote</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">escape</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">force_quote</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">force_not_null</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">force_null</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">encoding</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/asyncpg/connection.html#Connection.copy_to_table"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#asyncpg.connection.Connection.copy_to_table" title="Permalink to this definition">¶</a></dt>
<dd><p>Copy data to the specified table.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>table_name</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><em>str</em></a>) – The name of the table to copy data to.</p></li>
<li><p><strong>source</strong> – A <a class="reference external" href="https://docs.python.org/3/glossary.html#term-path-like-object" title="(in Python v3.10)"><span class="xref std std-term">path-like object</span></a>,
or a <a class="reference external" href="https://docs.python.org/3/glossary.html#term-file-like-object" title="(in Python v3.10)"><span class="xref std std-term">file-like object</span></a>, or
an <a class="reference external" href="https://docs.python.org/3/glossary.html#term-asynchronous-iterable" title="(in Python v3.10)"><span class="xref std std-term">asynchronous iterable</span></a>
that returns <code class="docutils literal notranslate"><span class="pre">bytes</span></code>, or an object supporting the
<a class="reference external" href="https://docs.python.org/3/c-api/buffer.html#bufferobjects" title="(in Python v3.10)"><span class="xref std std-ref">buffer protocol</span></a>.</p></li>
<li><p><strong>columns</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.10)"><em>list</em></a>) – An optional list of column names to copy.</p></li>
<li><p><strong>schema_name</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><em>str</em></a>) – An optional schema name to qualify the table.</p></li>
<li><p><strong>timeout</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.10)"><em>float</em></a>) – Optional timeout value in seconds.</p></li>
</ul>
</dd>
</dl>
<p>The remaining keyword arguments are <code class="docutils literal notranslate"><span class="pre">COPY</span></code> statement options,
see <a class="reference external" href="https://www.postgresql.org/docs/current/static/sql-copy.html">COPY statement documentation</a> for details.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>The status string of the COPY command.</p>
</dd>
</dl>
<p>Example:</p>
<div class="highlight-pycon notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">asyncpg</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">asyncio</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">async</span> <span class="k">def</span> <span class="nf">run</span><span class="p">():</span>
<span class="gp">... </span>    <span class="n">con</span> <span class="o">=</span> <span class="k">await</span> <span class="n">asyncpg</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="n">user</span><span class="o">=</span><span class="s1">&#39;postgres&#39;</span><span class="p">)</span>
<span class="gp">... </span>    <span class="n">result</span> <span class="o">=</span> <span class="k">await</span> <span class="n">con</span><span class="o">.</span><span class="n">copy_to_table</span><span class="p">(</span>
<span class="gp">... </span>        <span class="s1">&#39;mytable&#39;</span><span class="p">,</span> <span class="n">source</span><span class="o">=</span><span class="s1">&#39;datafile.tbl&#39;</span><span class="p">)</span>
<span class="gp">... </span>    <span class="nb">print</span><span class="p">(</span><span class="n">result</span><span class="p">)</span>
<span class="gp">...</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">asyncio</span><span class="o">.</span><span class="n">get_event_loop</span><span class="p">()</span><span class="o">.</span><span class="n">run_until_complete</span><span class="p">(</span><span class="n">run</span><span class="p">())</span>
<span class="go">&#39;COPY 140000&#39;</span>
</pre></div>
</div>
<div class="versionadded">
<p><span class="versionmodified added">New in version 0.11.0.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="asyncpg.connection.Connection.cursor">
<span class="sig-name descname"><span class="pre">cursor</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">query</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">prefetch</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">timeout</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">record_class</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/asyncpg/connection.html#Connection.cursor"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#asyncpg.connection.Connection.cursor" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a <em>cursor factory</em> for the specified query.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>args</strong> – Query arguments.</p></li>
<li><p><strong>prefetch</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)"><em>int</em></a>) – The number of rows the <em>cursor iterator</em>
will prefetch (defaults to <code class="docutils literal notranslate"><span class="pre">50</span></code>.)</p></li>
<li><p><strong>timeout</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.10)"><em>float</em></a>) – Optional timeout in seconds.</p></li>
<li><p><strong>record_class</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#type" title="(in Python v3.10)"><em>type</em></a>) – If specified, the class to use for records returned by this cursor.
Must be a subclass of <a class="reference internal" href="#asyncpg.Record" title="asyncpg.Record"><code class="xref py py-class docutils literal notranslate"><span class="pre">Record</span></code></a>.  If not specified,
a per-connection <em>record_class</em> is used.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A <code class="xref py py-class docutils literal notranslate"><span class="pre">CursorFactory</span></code> object.</p>
</dd>
</dl>
<div class="versionchanged">
<p><span class="versionmodified changed">Changed in version 0.22.0: </span>Added the <em>record_class</em> parameter.</p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="asyncpg.connection.Connection.execute">
<em class="property"><span class="pre">coroutine</span> </em><span class="sig-name descname"><span class="pre">execute</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">query</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><span class="pre">str</span></a></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">timeout</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.10)"><span class="pre">float</span></a><span class="p"><span class="pre">]</span></span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><span class="pre">str</span></a></span></span><a class="reference internal" href="../_modules/asyncpg/connection.html#Connection.execute"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#asyncpg.connection.Connection.execute" title="Permalink to this definition">¶</a></dt>
<dd><p>Execute an SQL command (or commands).</p>
<p>This method can execute many SQL commands at once, when no arguments
are provided.</p>
<p>Example:</p>
<div class="highlight-pycon notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">await</span> <span class="n">con</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s1">&#39;&#39;&#39;</span>
<span class="gp">... </span><span class="s1">    CREATE TABLE mytab (a int);</span>
<span class="gp">... </span><span class="s1">    INSERT INTO mytab (a) VALUES (100), (200), (300);</span>
<span class="gp">... </span><span class="s1">&#39;&#39;&#39;</span><span class="p">)</span>
<span class="go">INSERT 0 3</span>

<span class="gp">&gt;&gt;&gt; </span><span class="k">await</span> <span class="n">con</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s1">&#39;&#39;&#39;</span>
<span class="gp">... </span><span class="s1">    INSERT INTO mytab (a) VALUES ($1), ($2)</span>
<span class="gp">... </span><span class="s1">&#39;&#39;&#39;</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">20</span><span class="p">)</span>
<span class="go">INSERT 0 2</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>args</strong> – Query arguments.</p></li>
<li><p><strong>timeout</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.10)"><em>float</em></a>) – Optional timeout value in seconds.</p></li>
</ul>
</dd>
<dt class="field-even">Return str</dt>
<dd class="field-even"><p>Status of the last SQL command.</p>
</dd>
</dl>
<div class="versionchanged">
<p><span class="versionmodified changed">Changed in version 0.5.4: </span>Made it possible to pass query arguments.</p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="asyncpg.connection.Connection.executemany">
<em class="property"><span class="pre">coroutine</span> </em><span class="sig-name descname"><span class="pre">executemany</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">command</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><span class="pre">str</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">timeout</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.10)"><span class="pre">float</span></a><span class="p"><span class="pre">]</span></span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/asyncpg/connection.html#Connection.executemany"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#asyncpg.connection.Connection.executemany" title="Permalink to this definition">¶</a></dt>
<dd><p>Execute an SQL <em>command</em> for each sequence of arguments in <em>args</em>.</p>
<p>Example:</p>
<div class="highlight-pycon notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">await</span> <span class="n">con</span><span class="o">.</span><span class="n">executemany</span><span class="p">(</span><span class="s1">&#39;&#39;&#39;</span>
<span class="gp">... </span><span class="s1">    INSERT INTO mytab (a) VALUES ($1, $2, $3);</span>
<span class="gp">... </span><span class="s1">&#39;&#39;&#39;</span><span class="p">,</span> <span class="p">[(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">),</span> <span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">)])</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>command</strong> – Command to execute.</p></li>
<li><p><strong>args</strong> – An iterable containing sequences of arguments.</p></li>
<li><p><strong>timeout</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.10)"><em>float</em></a>) – Optional timeout value in seconds.</p></li>
</ul>
</dd>
<dt class="field-even">Return None</dt>
<dd class="field-even"><p>This method discards the results of the operations.</p>
</dd>
</dl>
<div class="versionadded">
<p><span class="versionmodified added">New in version 0.7.0.</span></p>
</div>
<div class="versionchanged">
<p><span class="versionmodified changed">Changed in version 0.11.0: </span><cite>timeout</cite> became a keyword-only parameter.</p>
</div>
<div class="versionchanged">
<p><span class="versionmodified changed">Changed in version 0.22.0: </span><code class="docutils literal notranslate"><span class="pre">executemany()</span></code> is now an atomic operation, which means that
either all executions succeed, or none at all.  This is in contrast
to prior versions, where the effect of already-processed iterations
would remain in place when an error has occurred, unless
<code class="docutils literal notranslate"><span class="pre">executemany()</span></code> was called in a transaction.</p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="asyncpg.connection.Connection.fetch">
<em class="property"><span class="pre">coroutine</span> </em><span class="sig-name descname"><span class="pre">fetch</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">query</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">timeout</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">record_class</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.10)"><span class="pre">list</span></a></span></span><a class="reference internal" href="../_modules/asyncpg/connection.html#Connection.fetch"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#asyncpg.connection.Connection.fetch" title="Permalink to this definition">¶</a></dt>
<dd><p>Run a query and return the results as a list of <code class="xref py py-class docutils literal notranslate"><span class="pre">Record</span></code>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>query</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><em>str</em></a>) – Query text.</p></li>
<li><p><strong>args</strong> – Query arguments.</p></li>
<li><p><strong>timeout</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.10)"><em>float</em></a>) – Optional timeout value in seconds.</p></li>
<li><p><strong>record_class</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#type" title="(in Python v3.10)"><em>type</em></a>) – If specified, the class to use for records returned by this method.
Must be a subclass of <a class="reference internal" href="#asyncpg.Record" title="asyncpg.Record"><code class="xref py py-class docutils literal notranslate"><span class="pre">Record</span></code></a>.  If not specified,
a per-connection <em>record_class</em> is used.</p></li>
</ul>
</dd>
<dt class="field-even">Return list</dt>
<dd class="field-even"><p>A list of <a class="reference internal" href="#asyncpg.Record" title="asyncpg.Record"><code class="xref py py-class docutils literal notranslate"><span class="pre">Record</span></code></a> instances.  If specified, the
actual type of list elements would be <em>record_class</em>.</p>
</dd>
</dl>
<div class="versionchanged">
<p><span class="versionmodified changed">Changed in version 0.22.0: </span>Added the <em>record_class</em> parameter.</p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="asyncpg.connection.Connection.fetchrow">
<em class="property"><span class="pre">coroutine</span> </em><span class="sig-name descname"><span class="pre">fetchrow</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">query</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">timeout</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">record_class</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/asyncpg/connection.html#Connection.fetchrow"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#asyncpg.connection.Connection.fetchrow" title="Permalink to this definition">¶</a></dt>
<dd><p>Run a query and return the first row.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>query</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><em>str</em></a>) – Query text</p></li>
<li><p><strong>args</strong> – Query arguments</p></li>
<li><p><strong>timeout</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.10)"><em>float</em></a>) – Optional timeout value in seconds.</p></li>
<li><p><strong>record_class</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#type" title="(in Python v3.10)"><em>type</em></a>) – If specified, the class to use for the value returned by this
method.  Must be a subclass of <a class="reference internal" href="#asyncpg.Record" title="asyncpg.Record"><code class="xref py py-class docutils literal notranslate"><span class="pre">Record</span></code></a>.
If not specified, a per-connection <em>record_class</em> is used.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>The first row as a <a class="reference internal" href="#asyncpg.Record" title="asyncpg.Record"><code class="xref py py-class docutils literal notranslate"><span class="pre">Record</span></code></a> instance, or None if
no records were returned by the query.  If specified,
<em>record_class</em> is used as the type for the result value.</p>
</dd>
</dl>
<div class="versionchanged">
<p><span class="versionmodified changed">Changed in version 0.22.0: </span>Added the <em>record_class</em> parameter.</p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="asyncpg.connection.Connection.fetchval">
<em class="property"><span class="pre">coroutine</span> </em><span class="sig-name descname"><span class="pre">fetchval</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">query</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">column</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">timeout</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/asyncpg/connection.html#Connection.fetchval"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#asyncpg.connection.Connection.fetchval" title="Permalink to this definition">¶</a></dt>
<dd><p>Run a query and return a value in the first row.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>query</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><em>str</em></a>) – Query text.</p></li>
<li><p><strong>args</strong> – Query arguments.</p></li>
<li><p><strong>column</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)"><em>int</em></a>) – Numeric index within the record of the value to
return (defaults to 0).</p></li>
<li><p><strong>timeout</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.10)"><em>float</em></a>) – Optional timeout value in seconds.
If not specified, defaults to the value of
<code class="docutils literal notranslate"><span class="pre">command_timeout</span></code> argument to the <code class="docutils literal notranslate"><span class="pre">Connection</span></code>
instance constructor.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>The value of the specified column of the first record, or
None if no records were returned by the query.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="asyncpg.connection.Connection.get_server_pid">
<span class="sig-name descname"><span class="pre">get_server_pid</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/asyncpg/connection.html#Connection.get_server_pid"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#asyncpg.connection.Connection.get_server_pid" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the PID of the Postgres server the connection is bound to.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="asyncpg.connection.Connection.get_server_version">
<span class="sig-name descname"><span class="pre">get_server_version</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/asyncpg/connection.html#Connection.get_server_version"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#asyncpg.connection.Connection.get_server_version" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the version of the connected PostgreSQL server.</p>
<p>The returned value is a named tuple similar to that in
<code class="docutils literal notranslate"><span class="pre">sys.version_info</span></code>:</p>
<div class="highlight-pycon notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">con</span><span class="o">.</span><span class="n">get_server_version</span><span class="p">()</span>
<span class="go">ServerVersion(major=9, minor=6, micro=1,</span>
<span class="go">              releaselevel=&#39;final&#39;, serial=0)</span>
</pre></div>
</div>
<div class="versionadded">
<p><span class="versionmodified added">New in version 0.8.0.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="asyncpg.connection.Connection.get_settings">
<span class="sig-name descname"><span class="pre">get_settings</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/asyncpg/connection.html#Connection.get_settings"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#asyncpg.connection.Connection.get_settings" title="Permalink to this definition">¶</a></dt>
<dd><p>Return connection settings.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p><a class="reference internal" href="#asyncpg.ConnectionSettings" title="asyncpg.ConnectionSettings"><code class="xref py py-class docutils literal notranslate"><span class="pre">ConnectionSettings</span></code></a>.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="asyncpg.connection.Connection.is_closed">
<span class="sig-name descname"><span class="pre">is_closed</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/asyncpg/connection.html#Connection.is_closed"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#asyncpg.connection.Connection.is_closed" title="Permalink to this definition">¶</a></dt>
<dd><p>Return <code class="docutils literal notranslate"><span class="pre">True</span></code> if the connection is closed, <code class="docutils literal notranslate"><span class="pre">False</span></code> otherwise.</p>
<dl class="field-list simple">
<dt class="field-odd">Return bool</dt>
<dd class="field-odd"><p><code class="docutils literal notranslate"><span class="pre">True</span></code> if the connection is closed, <code class="docutils literal notranslate"><span class="pre">False</span></code>
otherwise.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="asyncpg.connection.Connection.is_in_transaction">
<span class="sig-name descname"><span class="pre">is_in_transaction</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/asyncpg/connection.html#Connection.is_in_transaction"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#asyncpg.connection.Connection.is_in_transaction" title="Permalink to this definition">¶</a></dt>
<dd><p>Return True if Connection is currently inside a transaction.</p>
<dl class="field-list simple">
<dt class="field-odd">Return bool</dt>
<dd class="field-odd"><p>True if inside transaction, False otherwise.</p>
</dd>
</dl>
<div class="versionadded">
<p><span class="versionmodified added">New in version 0.16.0.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="asyncpg.connection.Connection.prepare">
<em class="property"><span class="pre">coroutine</span> </em><span class="sig-name descname"><span class="pre">prepare</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">query</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">timeout</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">record_class</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/asyncpg/connection.html#Connection.prepare"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#asyncpg.connection.Connection.prepare" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a <em>prepared statement</em> for the specified query.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>query</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><em>str</em></a>) – Text of the query to create a prepared statement for.</p></li>
<li><p><strong>name</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><em>str</em></a>) – Optional name of the returned prepared statement.  If not
specified, the name is auto-generated.</p></li>
<li><p><strong>timeout</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.10)"><em>float</em></a>) – Optional timeout value in seconds.</p></li>
<li><p><strong>record_class</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#type" title="(in Python v3.10)"><em>type</em></a>) – If specified, the class to use for records returned by the
prepared statement.  Must be a subclass of
<a class="reference internal" href="#asyncpg.Record" title="asyncpg.Record"><code class="xref py py-class docutils literal notranslate"><span class="pre">Record</span></code></a>.  If not specified, a per-connection
<em>record_class</em> is used.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A <code class="xref py py-class docutils literal notranslate"><span class="pre">PreparedStatement</span></code> instance.</p>
</dd>
</dl>
<div class="versionchanged">
<p><span class="versionmodified changed">Changed in version 0.22.0: </span>Added the <em>record_class</em> parameter.</p>
</div>
<div class="versionchanged">
<p><span class="versionmodified changed">Changed in version 0.25.0: </span>Added the <em>name</em> parameter.</p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="asyncpg.connection.Connection.reload_schema_state">
<em class="property"><span class="pre">coroutine</span> </em><span class="sig-name descname"><span class="pre">reload_schema_state</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/asyncpg/connection.html#Connection.reload_schema_state"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#asyncpg.connection.Connection.reload_schema_state" title="Permalink to this definition">¶</a></dt>
<dd><p>Indicate that the database schema information must be reloaded.</p>
<p>For performance reasons, asyncpg caches certain aspects of the
database schema, such as the layout of composite types.  Consequently,
when the database schema changes, and asyncpg is not able to
gracefully recover from an error caused by outdated schema
assumptions, an <code class="xref py py-exc docutils literal notranslate"><span class="pre">OutdatedSchemaCacheError</span></code>
is raised.  To prevent the exception, this method may be used to inform
asyncpg that the database schema has changed.</p>
<p>Example:</p>
<div class="highlight-pycon notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">asyncpg</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">asyncio</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">async</span> <span class="k">def</span> <span class="nf">change_type</span><span class="p">(</span><span class="n">con</span><span class="p">):</span>
<span class="gp">... </span>    <span class="n">result</span> <span class="o">=</span> <span class="k">await</span> <span class="n">con</span><span class="o">.</span><span class="n">fetch</span><span class="p">(</span><span class="s1">&#39;SELECT id, info FROM tbl&#39;</span><span class="p">)</span>
<span class="gp">... </span>    <span class="c1"># Change composite&#39;s attribute type &quot;int&quot;=&gt;&quot;text&quot;</span>
<span class="gp">... </span>    <span class="k">await</span> <span class="n">con</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s1">&#39;ALTER TYPE custom DROP ATTRIBUTE y&#39;</span><span class="p">)</span>
<span class="gp">... </span>    <span class="k">await</span> <span class="n">con</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s1">&#39;ALTER TYPE custom ADD ATTRIBUTE y text&#39;</span><span class="p">)</span>
<span class="gp">... </span>    <span class="k">await</span> <span class="n">con</span><span class="o">.</span><span class="n">reload_schema_state</span><span class="p">()</span>
<span class="gp">... </span>    <span class="k">for</span> <span class="n">id_</span><span class="p">,</span> <span class="n">info</span> <span class="ow">in</span> <span class="n">result</span><span class="p">:</span>
<span class="gp">... </span>        <span class="n">new</span> <span class="o">=</span> <span class="p">(</span><span class="n">info</span><span class="p">[</span><span class="s1">&#39;x&#39;</span><span class="p">],</span> <span class="nb">str</span><span class="p">(</span><span class="n">info</span><span class="p">[</span><span class="s1">&#39;y&#39;</span><span class="p">]))</span>
<span class="gp">... </span>        <span class="k">await</span> <span class="n">con</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span>
<span class="gp">... </span>            <span class="s1">&#39;UPDATE tbl SET info=$2 WHERE id=$1&#39;</span><span class="p">,</span> <span class="n">id_</span><span class="p">,</span> <span class="n">new</span><span class="p">)</span>
<span class="gp">...</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">async</span> <span class="k">def</span> <span class="nf">run</span><span class="p">():</span>
<span class="gp">... </span>    <span class="c1"># Initial schema:</span>
<span class="gp">... </span>    <span class="c1"># CREATE TYPE custom AS (x int, y int);</span>
<span class="gp">... </span>    <span class="c1"># CREATE TABLE tbl(id int, info custom);</span>
<span class="gp">... </span>    <span class="n">con</span> <span class="o">=</span> <span class="k">await</span> <span class="n">asyncpg</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="n">user</span><span class="o">=</span><span class="s1">&#39;postgres&#39;</span><span class="p">)</span>
<span class="gp">... </span>    <span class="k">async</span> <span class="k">with</span> <span class="n">con</span><span class="o">.</span><span class="n">transaction</span><span class="p">():</span>
<span class="gp">... </span>        <span class="c1"># Prevent concurrent changes in the table</span>
<span class="gp">... </span>        <span class="k">await</span> <span class="n">con</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s1">&#39;LOCK TABLE tbl&#39;</span><span class="p">)</span>
<span class="gp">... </span>        <span class="k">await</span> <span class="n">change_type</span><span class="p">(</span><span class="n">con</span><span class="p">)</span>
<span class="gp">...</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">asyncio</span><span class="o">.</span><span class="n">get_event_loop</span><span class="p">()</span><span class="o">.</span><span class="n">run_until_complete</span><span class="p">(</span><span class="n">run</span><span class="p">())</span>
</pre></div>
</div>
<div class="versionadded">
<p><span class="versionmodified added">New in version 0.14.0.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="asyncpg.connection.Connection.remove_listener">
<em class="property"><span class="pre">coroutine</span> </em><span class="sig-name descname"><span class="pre">remove_listener</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">channel</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">callback</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/asyncpg/connection.html#Connection.remove_listener"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#asyncpg.connection.Connection.remove_listener" title="Permalink to this definition">¶</a></dt>
<dd><p>Remove a listening callback on the specified channel.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="asyncpg.connection.Connection.remove_log_listener">
<span class="sig-name descname"><span class="pre">remove_log_listener</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">callback</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/asyncpg/connection.html#Connection.remove_log_listener"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#asyncpg.connection.Connection.remove_log_listener" title="Permalink to this definition">¶</a></dt>
<dd><p>Remove a listening callback for log messages.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 0.12.0.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="asyncpg.connection.Connection.remove_termination_listener">
<span class="sig-name descname"><span class="pre">remove_termination_listener</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">callback</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/asyncpg/connection.html#Connection.remove_termination_listener"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#asyncpg.connection.Connection.remove_termination_listener" title="Permalink to this definition">¶</a></dt>
<dd><p>Remove a listening callback for connection termination.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>callback</strong> (<em>callable</em>) – The callable or coroutine function that was passed to
<a class="reference internal" href="#asyncpg.connection.Connection.add_termination_listener" title="asyncpg.connection.Connection.add_termination_listener"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Connection.add_termination_listener()</span></code></a>.</p>
</dd>
</dl>
<div class="versionadded">
<p><span class="versionmodified added">New in version 0.21.0.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="asyncpg.connection.Connection.reset_type_codec">
<em class="property"><span class="pre">coroutine</span> </em><span class="sig-name descname"><span class="pre">reset_type_codec</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">typename</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">schema</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'public'</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/asyncpg/connection.html#Connection.reset_type_codec"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#asyncpg.connection.Connection.reset_type_codec" title="Permalink to this definition">¶</a></dt>
<dd><p>Reset <em>typename</em> codec to the default implementation.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>typename</strong> – Name of the data type the codec is for.</p></li>
<li><p><strong>schema</strong> – Schema name of the data type the codec is for
(defaults to <code class="docutils literal notranslate"><span class="pre">'public'</span></code>)</p></li>
</ul>
</dd>
</dl>
<div class="versionadded">
<p><span class="versionmodified added">New in version 0.12.0.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="asyncpg.connection.Connection.set_builtin_type_codec">
<em class="property"><span class="pre">coroutine</span> </em><span class="sig-name descname"><span class="pre">set_builtin_type_codec</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">typename</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">schema</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'public'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">codec_name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">format</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/asyncpg/connection.html#Connection.set_builtin_type_codec"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#asyncpg.connection.Connection.set_builtin_type_codec" title="Permalink to this definition">¶</a></dt>
<dd><p>Set a builtin codec for the specified scalar data type.</p>
<p>This method has two uses.  The first is to register a builtin
codec for an extension type without a stable OID, such as ‘hstore’.
The second use is to declare that an extension type or a
user-defined type is wire-compatible with a certain builtin
data type and should be exchanged as such.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>typename</strong> – Name of the data type the codec is for.</p></li>
<li><p><strong>schema</strong> – Schema name of the data type the codec is for
(defaults to <code class="docutils literal notranslate"><span class="pre">'public'</span></code>).</p></li>
<li><p><strong>codec_name</strong> – The name of the builtin codec to use for the type.
This should be either the name of a known core type
(such as <code class="docutils literal notranslate"><span class="pre">&quot;int&quot;</span></code>), or the name of a supported extension
type.  Currently, the only supported extension type is
<code class="docutils literal notranslate"><span class="pre">&quot;pg_contrib.hstore&quot;</span></code>.</p></li>
<li><p><strong>format</strong> – If <em>format</em> is <code class="docutils literal notranslate"><span class="pre">None</span></code> (the default), all formats supported
by the target codec are declared to be supported for <em>typename</em>.
If <em>format</em> is <code class="docutils literal notranslate"><span class="pre">'text'</span></code> or <code class="docutils literal notranslate"><span class="pre">'binary'</span></code>, then only the
specified format is declared to be supported for <em>typename</em>.</p></li>
</ul>
</dd>
</dl>
<div class="versionchanged">
<p><span class="versionmodified changed">Changed in version 0.18.0: </span>The <em>codec_name</em> argument can be the name of any known
core data type.  Added the <em>format</em> keyword argument.</p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="asyncpg.connection.Connection.set_type_codec">
<em class="property"><span class="pre">coroutine</span> </em><span class="sig-name descname"><span class="pre">set_type_codec</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">typename</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">schema</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'public'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">encoder</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">decoder</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">format</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'text'</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/asyncpg/connection.html#Connection.set_type_codec"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#asyncpg.connection.Connection.set_type_codec" title="Permalink to this definition">¶</a></dt>
<dd><p>Set an encoder/decoder pair for the specified data type.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>typename</strong> – Name of the data type the codec is for.</p></li>
<li><p><strong>schema</strong> – Schema name of the data type the codec is for
(defaults to <code class="docutils literal notranslate"><span class="pre">'public'</span></code>)</p></li>
<li><p><strong>format</strong> – <p>The type of the argument received by the <em>decoder</em> callback,
and the type of the <em>encoder</em> callback return value.</p>
<p>If <em>format</em> is <code class="docutils literal notranslate"><span class="pre">'text'</span></code> (the default), the exchange datum is a
<code class="docutils literal notranslate"><span class="pre">str</span></code> instance containing valid text representation of the
data type.</p>
<p>If <em>format</em> is <code class="docutils literal notranslate"><span class="pre">'binary'</span></code>, the exchange datum is a <code class="docutils literal notranslate"><span class="pre">bytes</span></code>
instance containing valid _binary_ representation of the
data type.</p>
<p>If <em>format</em> is <code class="docutils literal notranslate"><span class="pre">'tuple'</span></code>, the exchange datum is a type-specific
<code class="docutils literal notranslate"><span class="pre">tuple</span></code> of values.  The table below lists supported data
types and their format for this mode.</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 27%" />
<col style="width: 73%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Type</p></th>
<th class="head"><p>Tuple layout</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">interval</span></code></p></td>
<td><p>(<code class="docutils literal notranslate"><span class="pre">months</span></code>, <code class="docutils literal notranslate"><span class="pre">days</span></code>, <code class="docutils literal notranslate"><span class="pre">microseconds</span></code>)</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">date</span></code></p></td>
<td><p>(<code class="docutils literal notranslate"><span class="pre">date</span> <span class="pre">ordinal</span> <span class="pre">relative</span> <span class="pre">to</span> <span class="pre">Jan</span> <span class="pre">1</span> <span class="pre">2000</span></code>,)
<code class="docutils literal notranslate"><span class="pre">-2^31</span></code> for negative infinity timestamp
<code class="docutils literal notranslate"><span class="pre">2^31-1</span></code> for positive infinity timestamp.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">timestamp</span></code></p></td>
<td><p>(<code class="docutils literal notranslate"><span class="pre">microseconds</span> <span class="pre">relative</span> <span class="pre">to</span> <span class="pre">Jan</span> <span class="pre">1</span> <span class="pre">2000</span></code>,)
<code class="docutils literal notranslate"><span class="pre">-2^63</span></code> for negative infinity timestamp
<code class="docutils literal notranslate"><span class="pre">2^63-1</span></code> for positive infinity timestamp.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">timestamp</span>
<span class="pre">with</span> <span class="pre">time</span> <span class="pre">zone</span></code></p></td>
<td><p>(<code class="docutils literal notranslate"><span class="pre">microseconds</span> <span class="pre">relative</span> <span class="pre">to</span> <span class="pre">Jan</span> <span class="pre">1</span> <span class="pre">2000</span>
<span class="pre">UTC</span></code>,)
<code class="docutils literal notranslate"><span class="pre">-2^63</span></code> for negative infinity timestamp
<code class="docutils literal notranslate"><span class="pre">2^63-1</span></code> for positive infinity timestamp.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">time</span></code></p></td>
<td><p>(<code class="docutils literal notranslate"><span class="pre">microseconds</span></code>,)</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">time</span> <span class="pre">with</span>
<span class="pre">time</span> <span class="pre">zone</span></code></p></td>
<td><p>(<code class="docutils literal notranslate"><span class="pre">microseconds</span></code>,
<code class="docutils literal notranslate"><span class="pre">time</span> <span class="pre">zone</span> <span class="pre">offset</span> <span class="pre">in</span> <span class="pre">seconds</span></code>)</p></td>
</tr>
</tbody>
</table>
</p></li>
<li><p><strong>encoder</strong> – Callable accepting a Python object as a single argument and
returning a value encoded according to <em>format</em>.</p></li>
<li><p><strong>decoder</strong> – Callable accepting a single argument encoded according to <em>format</em>
and returning a decoded Python object.</p></li>
</ul>
</dd>
</dl>
<p>Example:</p>
<div class="highlight-pycon notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">asyncpg</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">asyncio</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">datetime</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">dateutil.relativedelta</span> <span class="kn">import</span> <span class="n">relativedelta</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">async</span> <span class="k">def</span> <span class="nf">run</span><span class="p">():</span>
<span class="gp">... </span>    <span class="n">con</span> <span class="o">=</span> <span class="k">await</span> <span class="n">asyncpg</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="n">user</span><span class="o">=</span><span class="s1">&#39;postgres&#39;</span><span class="p">)</span>
<span class="gp">... </span>    <span class="k">def</span> <span class="nf">encoder</span><span class="p">(</span><span class="n">delta</span><span class="p">):</span>
<span class="gp">... </span>        <span class="n">ndelta</span> <span class="o">=</span> <span class="n">delta</span><span class="o">.</span><span class="n">normalized</span><span class="p">()</span>
<span class="gp">... </span>        <span class="k">return</span> <span class="p">(</span><span class="n">ndelta</span><span class="o">.</span><span class="n">years</span> <span class="o">*</span> <span class="mi">12</span> <span class="o">+</span> <span class="n">ndelta</span><span class="o">.</span><span class="n">months</span><span class="p">,</span>
<span class="gp">... </span>                <span class="n">ndelta</span><span class="o">.</span><span class="n">days</span><span class="p">,</span>
<span class="gp">... </span>                <span class="p">((</span><span class="n">ndelta</span><span class="o">.</span><span class="n">hours</span> <span class="o">*</span> <span class="mi">3600</span> <span class="o">+</span>
<span class="gp">... </span>                   <span class="n">ndelta</span><span class="o">.</span><span class="n">minutes</span> <span class="o">*</span> <span class="mi">60</span> <span class="o">+</span>
<span class="gp">... </span>                   <span class="n">ndelta</span><span class="o">.</span><span class="n">seconds</span><span class="p">)</span> <span class="o">*</span> <span class="mi">1000000</span> <span class="o">+</span>
<span class="gp">... </span>                 <span class="n">ndelta</span><span class="o">.</span><span class="n">microseconds</span><span class="p">))</span>
<span class="gp">... </span>    <span class="k">def</span> <span class="nf">decoder</span><span class="p">(</span><span class="n">tup</span><span class="p">):</span>
<span class="gp">... </span>        <span class="k">return</span> <span class="n">relativedelta</span><span class="p">(</span><span class="n">months</span><span class="o">=</span><span class="n">tup</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">days</span><span class="o">=</span><span class="n">tup</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span>
<span class="gp">... </span>                             <span class="n">microseconds</span><span class="o">=</span><span class="n">tup</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span>
<span class="gp">... </span>    <span class="k">await</span> <span class="n">con</span><span class="o">.</span><span class="n">set_type_codec</span><span class="p">(</span>
<span class="gp">... </span>        <span class="s1">&#39;interval&#39;</span><span class="p">,</span> <span class="n">schema</span><span class="o">=</span><span class="s1">&#39;pg_catalog&#39;</span><span class="p">,</span> <span class="n">encoder</span><span class="o">=</span><span class="n">encoder</span><span class="p">,</span>
<span class="gp">... </span>        <span class="n">decoder</span><span class="o">=</span><span class="n">decoder</span><span class="p">,</span> <span class="nb">format</span><span class="o">=</span><span class="s1">&#39;tuple&#39;</span><span class="p">)</span>
<span class="gp">... </span>    <span class="n">result</span> <span class="o">=</span> <span class="k">await</span> <span class="n">con</span><span class="o">.</span><span class="n">fetchval</span><span class="p">(</span>
<span class="gp">... </span>        <span class="s2">&quot;SELECT &#39;2 years 3 mons 1 day&#39;::interval&quot;</span><span class="p">)</span>
<span class="gp">... </span>    <span class="nb">print</span><span class="p">(</span><span class="n">result</span><span class="p">)</span>
<span class="gp">... </span>    <span class="nb">print</span><span class="p">(</span><span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="p">(</span><span class="mi">2002</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span> <span class="o">+</span> <span class="n">result</span><span class="p">)</span>
<span class="gp">...</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">asyncio</span><span class="o">.</span><span class="n">get_event_loop</span><span class="p">()</span><span class="o">.</span><span class="n">run_until_complete</span><span class="p">(</span><span class="n">run</span><span class="p">())</span>
<span class="go">relativedelta(years=+2, months=+3, days=+1)</span>
<span class="go">2004-04-02 00:00:00</span>
</pre></div>
</div>
<div class="versionadded">
<p><span class="versionmodified added">New in version 0.12.0: </span>Added the <code class="docutils literal notranslate"><span class="pre">format</span></code> keyword argument and support for ‘tuple’
format.</p>
</div>
<div class="versionchanged">
<p><span class="versionmodified changed">Changed in version 0.12.0: </span>The <code class="docutils literal notranslate"><span class="pre">binary</span></code> keyword argument is deprecated in favor of
<code class="docutils literal notranslate"><span class="pre">format</span></code>.</p>
</div>
<div class="versionchanged">
<p><span class="versionmodified changed">Changed in version 0.13.0: </span>The <code class="docutils literal notranslate"><span class="pre">binary</span></code> keyword argument was removed in favor of
<code class="docutils literal notranslate"><span class="pre">format</span></code>.</p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>It is recommended to use the <code class="docutils literal notranslate"><span class="pre">'binary'</span></code> or <code class="docutils literal notranslate"><span class="pre">'tuple'</span></code> <em>format</em>
whenever possible and if the underlying type supports it. Asyncpg
currently does not support text I/O for composite and range types,
and some other functionality, such as
<a class="reference internal" href="#asyncpg.connection.Connection.copy_to_table" title="asyncpg.connection.Connection.copy_to_table"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Connection.copy_to_table()</span></code></a>, does not support types with text
codecs.</p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="asyncpg.connection.Connection.terminate">
<span class="sig-name descname"><span class="pre">terminate</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/asyncpg/connection.html#Connection.terminate"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#asyncpg.connection.Connection.terminate" title="Permalink to this definition">¶</a></dt>
<dd><p>Terminate the connection without waiting for pending data.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="asyncpg.connection.Connection.transaction">
<span class="sig-name descname"><span class="pre">transaction</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">isolation</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">readonly</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">deferrable</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/asyncpg/connection.html#Connection.transaction"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#asyncpg.connection.Connection.transaction" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a <code class="xref py py-class docutils literal notranslate"><span class="pre">Transaction</span></code> object.</p>
<p>Refer to <a class="reference external" href="https://www.postgresql.org/docs/current/static/sql-set-transaction.html">PostgreSQL documentation</a> on the meaning of transaction
parameters.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>isolation</strong> – Transaction isolation mode, can be one of:
<cite>‘serializable’</cite>, <cite>‘repeatable_read’</cite>,
<cite>‘read_committed’</cite>. If not specified, the behavior
is up to the server and session, which is usually
<code class="docutils literal notranslate"><span class="pre">read_committed</span></code>.</p></li>
<li><p><strong>readonly</strong> – Specifies whether or not this transaction is
read-only.</p></li>
<li><p><strong>deferrable</strong> – Specifies whether or not this transaction is
deferrable.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="prepared-statements">
<span id="asyncpg-api-prepared-stmt"></span><h2>Prepared Statements<a class="headerlink" href="#prepared-statements" title="Permalink to this headline">¶</a></h2>
<p>Prepared statements are a PostgreSQL feature that can be used to optimize the
performance of queries that are executed more than once.  When a query
is <em>prepared</em> by a call to <code class="xref py py-meth docutils literal notranslate"><span class="pre">Connection.prepare()</span></code>, the server parses,
analyzes and compiles the query allowing to reuse that work once there is
a need to run the same query again.</p>
<div class="highlight-pycon notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">asyncpg</span><span class="o">,</span> <span class="nn">asyncio</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">loop</span> <span class="o">=</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">get_event_loop</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">async</span> <span class="k">def</span> <span class="nf">run</span><span class="p">():</span>
<span class="gp">... </span>    <span class="n">conn</span> <span class="o">=</span> <span class="k">await</span> <span class="n">asyncpg</span><span class="o">.</span><span class="n">connect</span><span class="p">()</span>
<span class="gp">... </span>    <span class="n">stmt</span> <span class="o">=</span> <span class="k">await</span> <span class="n">conn</span><span class="o">.</span><span class="n">prepare</span><span class="p">(</span><span class="s1">&#39;&#39;&#39;SELECT 2 ^ $1&#39;&#39;&#39;</span><span class="p">)</span>
<span class="gp">... </span>    <span class="nb">print</span><span class="p">(</span><span class="k">await</span> <span class="n">stmt</span><span class="o">.</span><span class="n">fetchval</span><span class="p">(</span><span class="mi">10</span><span class="p">))</span>
<span class="gp">... </span>    <span class="nb">print</span><span class="p">(</span><span class="k">await</span> <span class="n">stmt</span><span class="o">.</span><span class="n">fetchval</span><span class="p">(</span><span class="mi">20</span><span class="p">))</span>
<span class="gp">...</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">loop</span><span class="o">.</span><span class="n">run_until_complete</span><span class="p">(</span><span class="n">run</span><span class="p">())</span>
<span class="go">1024.0</span>
<span class="go">1048576.0</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>asyncpg automatically maintains a small LRU cache for queries executed
during calls to the <code class="xref py py-meth docutils literal notranslate"><span class="pre">fetch()</span></code>, <code class="xref py py-meth docutils literal notranslate"><span class="pre">fetchrow()</span></code>,
or <code class="xref py py-meth docutils literal notranslate"><span class="pre">fetchval()</span></code> methods.</p>
</div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>If you are using pgbouncer with <code class="docutils literal notranslate"><span class="pre">pool_mode</span></code> set to <code class="docutils literal notranslate"><span class="pre">transaction</span></code> or
<code class="docutils literal notranslate"><span class="pre">statement</span></code>, prepared statements will not work correctly.  See
<a class="reference internal" href="../faq.html#asyncpg-prepared-stmt-errors"><span class="std std-ref">Why am I getting prepared statement errors?</span></a> for more information.</p>
</div>
<dl class="py class">
<dt class="sig sig-object py" id="asyncpg.prepared_stmt.PreparedStatement">
<em class="property"><span class="pre">class</span> </em><span class="sig-name descname"><span class="pre">PreparedStatement</span></span><a class="reference internal" href="../_modules/asyncpg/prepared_stmt.html#PreparedStatement"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#asyncpg.prepared_stmt.PreparedStatement" title="Permalink to this definition">¶</a></dt>
<dd><p>A representation of a prepared statement.</p>
<dl class="py method">
<dt class="sig sig-object py" id="asyncpg.prepared_stmt.PreparedStatement.cursor">
<span class="sig-name descname"><span class="pre">cursor</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">prefetch</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">timeout</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="#asyncpg.cursor.CursorFactory" title="asyncpg.cursor.CursorFactory"><span class="pre">asyncpg.cursor.CursorFactory</span></a></span></span><a class="reference internal" href="../_modules/asyncpg/prepared_stmt.html#PreparedStatement.cursor"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#asyncpg.prepared_stmt.PreparedStatement.cursor" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a <em>cursor factory</em> for the prepared statement.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>args</strong> – Query arguments.</p></li>
<li><p><strong>prefetch</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)"><em>int</em></a>) – The number of rows the <em>cursor iterator</em>
will prefetch (defaults to <code class="docutils literal notranslate"><span class="pre">50</span></code>.)</p></li>
<li><p><strong>timeout</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.10)"><em>float</em></a>) – Optional timeout in seconds.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A <code class="xref py py-class docutils literal notranslate"><span class="pre">CursorFactory</span></code> object.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="asyncpg.prepared_stmt.PreparedStatement.executemany">
<span class="sig-name descname"><span class="pre">executemany</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">timeout</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.10)"><span class="pre">float</span></a></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/asyncpg/prepared_stmt.html#PreparedStatement.executemany"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#asyncpg.prepared_stmt.PreparedStatement.executemany" title="Permalink to this definition">¶</a></dt>
<dd><p>Execute the statement for each sequence of arguments in <em>args</em>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>args</strong> – An iterable containing sequences of arguments.</p></li>
<li><p><strong>timeout</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.10)"><em>float</em></a>) – Optional timeout value in seconds.</p></li>
</ul>
</dd>
<dt class="field-even">Return None</dt>
<dd class="field-even"><p>This method discards the results of the operations.</p>
</dd>
</dl>
<div class="versionadded">
<p><span class="versionmodified added">New in version 0.22.0.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="asyncpg.prepared_stmt.PreparedStatement.explain">
<span class="sig-name descname"><span class="pre">explain</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">analyze</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/asyncpg/prepared_stmt.html#PreparedStatement.explain"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#asyncpg.prepared_stmt.PreparedStatement.explain" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the execution plan of the statement.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>args</strong> – Query arguments.</p></li>
<li><p><strong>analyze</strong> – If <code class="docutils literal notranslate"><span class="pre">True</span></code>, the statement will be executed and
the run time statitics added to the return value.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>An object representing the execution plan.  This value
is actually a deserialized JSON output of the SQL
<code class="docutils literal notranslate"><span class="pre">EXPLAIN</span></code> command.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="asyncpg.prepared_stmt.PreparedStatement.fetch">
<span class="sig-name descname"><span class="pre">fetch</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">timeout</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/asyncpg/prepared_stmt.html#PreparedStatement.fetch"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#asyncpg.prepared_stmt.PreparedStatement.fetch" title="Permalink to this definition">¶</a></dt>
<dd><p>Execute the statement and return a list of <code class="xref py py-class docutils literal notranslate"><span class="pre">Record</span></code> objects.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>query</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><em>str</em></a>) – Query text</p></li>
<li><p><strong>args</strong> – Query arguments</p></li>
<li><p><strong>timeout</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.10)"><em>float</em></a>) – Optional timeout value in seconds.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A list of <code class="xref py py-class docutils literal notranslate"><span class="pre">Record</span></code> instances.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="asyncpg.prepared_stmt.PreparedStatement.fetchrow">
<span class="sig-name descname"><span class="pre">fetchrow</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">timeout</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/asyncpg/prepared_stmt.html#PreparedStatement.fetchrow"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#asyncpg.prepared_stmt.PreparedStatement.fetchrow" title="Permalink to this definition">¶</a></dt>
<dd><p>Execute the statement and return the first row.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>query</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><em>str</em></a>) – Query text</p></li>
<li><p><strong>args</strong> – Query arguments</p></li>
<li><p><strong>timeout</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.10)"><em>float</em></a>) – Optional timeout value in seconds.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>The first row as a <code class="xref py py-class docutils literal notranslate"><span class="pre">Record</span></code> instance.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="asyncpg.prepared_stmt.PreparedStatement.fetchval">
<span class="sig-name descname"><span class="pre">fetchval</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">column</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">timeout</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/asyncpg/prepared_stmt.html#PreparedStatement.fetchval"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#asyncpg.prepared_stmt.PreparedStatement.fetchval" title="Permalink to this definition">¶</a></dt>
<dd><p>Execute the statement and return a value in the first row.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>args</strong> – Query arguments.</p></li>
<li><p><strong>column</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)"><em>int</em></a>) – Numeric index within the record of the value to
return (defaults to 0).</p></li>
<li><p><strong>timeout</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.10)"><em>float</em></a>) – Optional timeout value in seconds.
If not specified, defaults to the value of
<code class="docutils literal notranslate"><span class="pre">command_timeout</span></code> argument to the <code class="docutils literal notranslate"><span class="pre">Connection</span></code>
instance constructor.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>The value of the specified column of the first record.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="asyncpg.prepared_stmt.PreparedStatement.get_attributes">
<span class="sig-name descname"><span class="pre">get_attributes</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/asyncpg/prepared_stmt.html#PreparedStatement.get_attributes"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#asyncpg.prepared_stmt.PreparedStatement.get_attributes" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a description of relation attributes (columns).</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>A tuple of <a class="reference internal" href="#asyncpg.types.Attribute" title="asyncpg.types.Attribute"><code class="xref py py-class docutils literal notranslate"><span class="pre">asyncpg.types.Attribute</span></code></a>.</p>
</dd>
</dl>
<p>Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">st</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">con</span><span class="o">.</span><span class="n">prepare</span><span class="p">(</span><span class="s1">&#39;&#39;&#39;</span>
<span class="s1">    SELECT typname, typnamespace FROM pg_type</span>
<span class="s1">&#39;&#39;&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">st</span><span class="o">.</span><span class="n">get_attributes</span><span class="p">())</span>

<span class="c1"># Will print:</span>
<span class="c1">#   (Attribute(</span>
<span class="c1">#       name=&#39;typname&#39;,</span>
<span class="c1">#       type=Type(oid=19, name=&#39;name&#39;, kind=&#39;scalar&#39;,</span>
<span class="c1">#                 schema=&#39;pg_catalog&#39;)),</span>
<span class="c1">#    Attribute(</span>
<span class="c1">#       name=&#39;typnamespace&#39;,</span>
<span class="c1">#       type=Type(oid=26, name=&#39;oid&#39;, kind=&#39;scalar&#39;,</span>
<span class="c1">#                 schema=&#39;pg_catalog&#39;)))</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="asyncpg.prepared_stmt.PreparedStatement.get_name">
<span class="sig-name descname"><span class="pre">get_name</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><span class="pre">str</span></a></span></span><a class="reference internal" href="../_modules/asyncpg/prepared_stmt.html#PreparedStatement.get_name"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#asyncpg.prepared_stmt.PreparedStatement.get_name" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the name of this prepared statement.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 0.25.0.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="asyncpg.prepared_stmt.PreparedStatement.get_parameters">
<span class="sig-name descname"><span class="pre">get_parameters</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/asyncpg/prepared_stmt.html#PreparedStatement.get_parameters"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#asyncpg.prepared_stmt.PreparedStatement.get_parameters" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a description of statement parameters types.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>A tuple of <a class="reference internal" href="#asyncpg.types.Type" title="asyncpg.types.Type"><code class="xref py py-class docutils literal notranslate"><span class="pre">asyncpg.types.Type</span></code></a>.</p>
</dd>
</dl>
<p>Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">stmt</span> <span class="o">=</span> <span class="k">await</span> <span class="n">connection</span><span class="o">.</span><span class="n">prepare</span><span class="p">(</span><span class="s1">&#39;SELECT ($1::int, $2::text)&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">stmt</span><span class="o">.</span><span class="n">get_parameters</span><span class="p">())</span>

<span class="c1"># Will print:</span>
<span class="c1">#   (Type(oid=23, name=&#39;int4&#39;, kind=&#39;scalar&#39;, schema=&#39;pg_catalog&#39;),</span>
<span class="c1">#    Type(oid=25, name=&#39;text&#39;, kind=&#39;scalar&#39;, schema=&#39;pg_catalog&#39;))</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="asyncpg.prepared_stmt.PreparedStatement.get_query">
<span class="sig-name descname"><span class="pre">get_query</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><span class="pre">str</span></a></span></span><a class="reference internal" href="../_modules/asyncpg/prepared_stmt.html#PreparedStatement.get_query"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#asyncpg.prepared_stmt.PreparedStatement.get_query" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the text of the query for this prepared statement.</p>
<p>Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">stmt</span> <span class="o">=</span> <span class="k">await</span> <span class="n">connection</span><span class="o">.</span><span class="n">prepare</span><span class="p">(</span><span class="s1">&#39;SELECT $1::int&#39;</span><span class="p">)</span>
<span class="k">assert</span> <span class="n">stmt</span><span class="o">.</span><span class="n">get_query</span><span class="p">()</span> <span class="o">==</span> <span class="s2">&quot;SELECT $1::int&quot;</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="asyncpg.prepared_stmt.PreparedStatement.get_statusmsg">
<span class="sig-name descname"><span class="pre">get_statusmsg</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><span class="pre">str</span></a></span></span><a class="reference internal" href="../_modules/asyncpg/prepared_stmt.html#PreparedStatement.get_statusmsg"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#asyncpg.prepared_stmt.PreparedStatement.get_statusmsg" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the status of the executed command.</p>
<p>Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">stmt</span> <span class="o">=</span> <span class="k">await</span> <span class="n">connection</span><span class="o">.</span><span class="n">prepare</span><span class="p">(</span><span class="s1">&#39;CREATE TABLE mytab (a int)&#39;</span><span class="p">)</span>
<span class="k">await</span> <span class="n">stmt</span><span class="o">.</span><span class="n">fetch</span><span class="p">()</span>
<span class="k">assert</span> <span class="n">stmt</span><span class="o">.</span><span class="n">get_statusmsg</span><span class="p">()</span> <span class="o">==</span> <span class="s2">&quot;CREATE TABLE&quot;</span>
</pre></div>
</div>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="transactions">
<span id="asyncpg-api-transaction"></span><h2>Transactions<a class="headerlink" href="#transactions" title="Permalink to this headline">¶</a></h2>
<p>The most common way to use transactions is through an <code class="docutils literal notranslate"><span class="pre">async</span> <span class="pre">with</span></code> statement:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">async</span> <span class="k">with</span> <span class="n">connection</span><span class="o">.</span><span class="n">transaction</span><span class="p">():</span>
    <span class="k">await</span> <span class="n">connection</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s2">&quot;INSERT INTO mytable VALUES(1, 2, 3)&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>asyncpg supports nested transactions (a nested transaction context will create
a <a class="reference external" href="https://www.postgresql.org/docs/current/static/sql-savepoint.html">savepoint</a>.):</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">async</span> <span class="k">with</span> <span class="n">connection</span><span class="o">.</span><span class="n">transaction</span><span class="p">():</span>
    <span class="k">await</span> <span class="n">connection</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s1">&#39;CREATE TABLE mytab (a int)&#39;</span><span class="p">)</span>

    <span class="k">try</span><span class="p">:</span>
        <span class="c1"># Create a nested transaction:</span>
        <span class="k">async</span> <span class="k">with</span> <span class="n">connection</span><span class="o">.</span><span class="n">transaction</span><span class="p">():</span>
            <span class="k">await</span> <span class="n">connection</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s1">&#39;INSERT INTO mytab (a) VALUES (1), (2)&#39;</span><span class="p">)</span>
            <span class="c1"># This nested transaction will be automatically rolled back:</span>
            <span class="k">raise</span> <span class="ne">Exception</span>
    <span class="k">except</span><span class="p">:</span>
        <span class="c1"># Ignore exception</span>
        <span class="k">pass</span>

    <span class="c1"># Because the nested transaction was rolled back, there</span>
    <span class="c1"># will be nothing in `mytab`.</span>
    <span class="k">assert</span> <span class="k">await</span> <span class="n">connection</span><span class="o">.</span><span class="n">fetch</span><span class="p">(</span><span class="s1">&#39;SELECT a FROM mytab&#39;</span><span class="p">)</span> <span class="o">==</span> <span class="p">[]</span>
</pre></div>
</div>
<p>Alternatively, transactions can be used without an <code class="docutils literal notranslate"><span class="pre">async</span> <span class="pre">with</span></code> block:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">tr</span> <span class="o">=</span> <span class="n">connection</span><span class="o">.</span><span class="n">transaction</span><span class="p">()</span>
<span class="k">await</span> <span class="n">tr</span><span class="o">.</span><span class="n">start</span><span class="p">()</span>
<span class="k">try</span><span class="p">:</span>
    <span class="o">...</span>
<span class="k">except</span><span class="p">:</span>
    <span class="k">await</span> <span class="n">tr</span><span class="o">.</span><span class="n">rollback</span><span class="p">()</span>
    <span class="k">raise</span>
<span class="k">else</span><span class="p">:</span>
    <span class="k">await</span> <span class="n">tr</span><span class="o">.</span><span class="n">commit</span><span class="p">()</span>
</pre></div>
</div>
<p>See also the
<a class="reference internal" href="#asyncpg.connection.Connection.transaction" title="asyncpg.connection.Connection.transaction"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Connection.transaction()</span></code></a>
function.</p>
<dl class="py class">
<dt class="sig sig-object py" id="asyncpg.transaction.Transaction">
<em class="property"><span class="pre">class</span> </em><span class="sig-name descname"><span class="pre">Transaction</span></span><a class="reference internal" href="../_modules/asyncpg/transaction.html#Transaction"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#asyncpg.transaction.Transaction" title="Permalink to this definition">¶</a></dt>
<dd><p>Represents a transaction or savepoint block.</p>
<p>Transactions are created by calling the
<code class="xref py py-meth docutils literal notranslate"><span class="pre">Connection.transaction()</span></code>
function.</p>
<dl class="describe">
<dt class="sig sig-object">
<span class="sig-name descname"><span class="pre">async</span> <span class="pre">with</span> <span class="pre">c:</span></span></dt>
<dd><p>start and commit/rollback the transaction or savepoint block
automatically when entering and exiting the code inside the
context manager block.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="asyncpg.transaction.Transaction.commit">
<span class="sig-name descname"><span class="pre">commit</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/asyncpg/transaction.html#Transaction.commit"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#asyncpg.transaction.Transaction.commit" title="Permalink to this definition">¶</a></dt>
<dd><p>Exit the transaction or savepoint block and commit changes.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="asyncpg.transaction.Transaction.rollback">
<span class="sig-name descname"><span class="pre">rollback</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/asyncpg/transaction.html#Transaction.rollback"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#asyncpg.transaction.Transaction.rollback" title="Permalink to this definition">¶</a></dt>
<dd><p>Exit the transaction or savepoint block and rollback changes.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="asyncpg.transaction.Transaction.start">
<span class="sig-name descname"><span class="pre">start</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/asyncpg/transaction.html#Transaction.start"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#asyncpg.transaction.Transaction.start" title="Permalink to this definition">¶</a></dt>
<dd><p>Enter the transaction or savepoint block.</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="cursors">
<span id="asyncpg-api-cursor"></span><h2>Cursors<a class="headerlink" href="#cursors" title="Permalink to this headline">¶</a></h2>
<p>Cursors are useful when there is a need to iterate over the results of
a large query without fetching all rows at once.  The cursor interface
provided by asyncpg supports <em>asynchronous iteration</em> via the <code class="docutils literal notranslate"><span class="pre">async</span> <span class="pre">for</span></code>
statement, and also a way to read row chunks and skip forward over the
result set.</p>
<p>To iterate over a cursor using a connection object use
<a class="reference internal" href="#asyncpg.connection.Connection.cursor" title="asyncpg.connection.Connection.cursor"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Connection.cursor()</span></code></a>.
To make the iteration efficient, the cursor will prefetch records to
reduce the number of queries sent to the server:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">async</span> <span class="k">def</span> <span class="nf">iterate</span><span class="p">(</span><span class="n">con</span><span class="p">:</span> <span class="n">Connection</span><span class="p">):</span>
    <span class="k">async</span> <span class="k">with</span> <span class="n">con</span><span class="o">.</span><span class="n">transaction</span><span class="p">():</span>
        <span class="c1"># Postgres requires non-scrollable cursors to be created</span>
        <span class="c1"># and used in a transaction.</span>
        <span class="k">async</span> <span class="k">for</span> <span class="n">record</span> <span class="ow">in</span> <span class="n">con</span><span class="o">.</span><span class="n">cursor</span><span class="p">(</span><span class="s1">&#39;SELECT generate_series(0, 100)&#39;</span><span class="p">):</span>
            <span class="nb">print</span><span class="p">(</span><span class="n">record</span><span class="p">)</span>
</pre></div>
</div>
<p>Or, alternatively, you can iterate over the cursor manually (cursor
won’t be prefetching any rows):</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">async</span> <span class="k">def</span> <span class="nf">iterate</span><span class="p">(</span><span class="n">con</span><span class="p">:</span> <span class="n">Connection</span><span class="p">):</span>
    <span class="k">async</span> <span class="k">with</span> <span class="n">con</span><span class="o">.</span><span class="n">transaction</span><span class="p">():</span>
        <span class="c1"># Postgres requires non-scrollable cursors to be created</span>
        <span class="c1"># and used in a transaction.</span>

        <span class="c1"># Create a Cursor object</span>
        <span class="n">cur</span> <span class="o">=</span> <span class="k">await</span> <span class="n">con</span><span class="o">.</span><span class="n">cursor</span><span class="p">(</span><span class="s1">&#39;SELECT generate_series(0, 100)&#39;</span><span class="p">)</span>

        <span class="c1"># Move the cursor 10 rows forward</span>
        <span class="k">await</span> <span class="n">cur</span><span class="o">.</span><span class="n">forward</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>

        <span class="c1"># Fetch one row and print it</span>
        <span class="nb">print</span><span class="p">(</span><span class="k">await</span> <span class="n">cur</span><span class="o">.</span><span class="n">fetchrow</span><span class="p">())</span>

        <span class="c1"># Fetch a list of 5 rows and print it</span>
        <span class="nb">print</span><span class="p">(</span><span class="k">await</span> <span class="n">cur</span><span class="o">.</span><span class="n">fetch</span><span class="p">(</span><span class="mi">5</span><span class="p">))</span>
</pre></div>
</div>
<p>It’s also possible to create cursors from prepared statements:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">async</span> <span class="k">def</span> <span class="nf">iterate</span><span class="p">(</span><span class="n">con</span><span class="p">:</span> <span class="n">Connection</span><span class="p">):</span>
    <span class="c1"># Create a prepared statement that will accept one argument</span>
    <span class="n">stmt</span> <span class="o">=</span> <span class="k">await</span> <span class="n">con</span><span class="o">.</span><span class="n">prepare</span><span class="p">(</span><span class="s1">&#39;SELECT generate_series(0, $1)&#39;</span><span class="p">)</span>

    <span class="k">async</span> <span class="k">with</span> <span class="n">con</span><span class="o">.</span><span class="n">transaction</span><span class="p">():</span>
        <span class="c1"># Postgres requires non-scrollable cursors to be created</span>
        <span class="c1"># and used in a transaction.</span>

        <span class="c1"># Execute the prepared statement passing `10` as the</span>
        <span class="c1"># argument -- that will generate a series or records</span>
        <span class="c1"># from 0..10.  Iterate over all of them and print every</span>
        <span class="c1"># record.</span>
        <span class="k">async</span> <span class="k">for</span> <span class="n">record</span> <span class="ow">in</span> <span class="n">stmt</span><span class="o">.</span><span class="n">cursor</span><span class="p">(</span><span class="mi">10</span><span class="p">):</span>
            <span class="nb">print</span><span class="p">(</span><span class="n">record</span><span class="p">)</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Cursors created by a call to
<a class="reference internal" href="#asyncpg.connection.Connection.cursor" title="asyncpg.connection.Connection.cursor"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Connection.cursor()</span></code></a> or
<a class="reference internal" href="#asyncpg.prepared_stmt.PreparedStatement.cursor" title="asyncpg.prepared_stmt.PreparedStatement.cursor"><code class="xref py py-meth docutils literal notranslate"><span class="pre">PreparedStatement.cursor()</span></code></a>
are <em>non-scrollable</em>: they can only be read forwards.  To create a scrollable
cursor, use the <code class="docutils literal notranslate"><span class="pre">DECLARE</span> <span class="pre">...</span> <span class="pre">SCROLL</span> <span class="pre">CURSOR</span></code> SQL statement directly.</p>
</div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Cursors created by a call to
<a class="reference internal" href="#asyncpg.connection.Connection.cursor" title="asyncpg.connection.Connection.cursor"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Connection.cursor()</span></code></a> or
<a class="reference internal" href="#asyncpg.prepared_stmt.PreparedStatement.cursor" title="asyncpg.prepared_stmt.PreparedStatement.cursor"><code class="xref py py-meth docutils literal notranslate"><span class="pre">PreparedStatement.cursor()</span></code></a>
cannot be used outside of a transaction.  Any such attempt will result in
<code class="xref py py-exc docutils literal notranslate"><span class="pre">InterfaceError</span></code>.</p>
<p>To create a cursor usable outside of a transaction, use the
<code class="docutils literal notranslate"><span class="pre">DECLARE</span> <span class="pre">...</span> <span class="pre">CURSOR</span> <span class="pre">WITH</span> <span class="pre">HOLD</span></code> SQL statement directly.</p>
</div>
<dl class="py class">
<dt class="sig sig-object py" id="asyncpg.cursor.CursorFactory">
<em class="property"><span class="pre">class</span> </em><span class="sig-name descname"><span class="pre">CursorFactory</span></span><a class="reference internal" href="../_modules/asyncpg/cursor.html#CursorFactory"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#asyncpg.cursor.CursorFactory" title="Permalink to this definition">¶</a></dt>
<dd><p>A cursor interface for the results of a query.</p>
<p>A cursor interface can be used to initiate efficient traversal of the
results of a large query.</p>
<dl class="describe">
<dt class="sig sig-object">
<span class="sig-name descname"><span class="pre">async</span> <span class="pre">for</span> <span class="pre">row</span> <span class="pre">in</span> <span class="pre">c</span></span></dt>
<dd><p>Execute the statement and iterate over the results asynchronously.</p>
</dd></dl>

<dl class="describe">
<dt class="sig sig-object">
<span class="sig-name descname"><span class="pre">await</span> <span class="pre">c</span></span></dt>
<dd><p>Execute the statement and return an instance of
<a class="reference internal" href="#asyncpg.cursor.Cursor" title="asyncpg.cursor.Cursor"><code class="xref py py-class docutils literal notranslate"><span class="pre">Cursor</span></code></a> which can be used to navigate over and
fetch subsets of the query results.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="asyncpg.cursor.Cursor">
<em class="property"><span class="pre">class</span> </em><span class="sig-name descname"><span class="pre">Cursor</span></span><a class="reference internal" href="../_modules/asyncpg/cursor.html#Cursor"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#asyncpg.cursor.Cursor" title="Permalink to this definition">¶</a></dt>
<dd><p>An open <em>portal</em> into the results of a query.</p>
<dl class="py method">
<dt class="sig sig-object py" id="asyncpg.cursor.Cursor.fetch">
<span class="sig-name descname"><span class="pre">fetch</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">n</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">timeout</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/asyncpg/cursor.html#Cursor.fetch"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#asyncpg.cursor.Cursor.fetch" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the next <em>n</em> rows as a list of <code class="xref py py-class docutils literal notranslate"><span class="pre">Record</span></code> objects.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>timeout</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.10)"><em>float</em></a>) – Optional timeout value in seconds.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A list of <code class="xref py py-class docutils literal notranslate"><span class="pre">Record</span></code> instances.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="asyncpg.cursor.Cursor.fetchrow">
<span class="sig-name descname"><span class="pre">fetchrow</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">timeout</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/asyncpg/cursor.html#Cursor.fetchrow"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#asyncpg.cursor.Cursor.fetchrow" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the next row.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>timeout</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.10)"><em>float</em></a>) – Optional timeout value in seconds.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A <code class="xref py py-class docutils literal notranslate"><span class="pre">Record</span></code> instance.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="asyncpg.cursor.Cursor.forward">
<span class="sig-name descname"><span class="pre">forward</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">n</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">timeout</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)"><span class="pre">int</span></a></span></span><a class="reference internal" href="../_modules/asyncpg/cursor.html#Cursor.forward"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#asyncpg.cursor.Cursor.forward" title="Permalink to this definition">¶</a></dt>
<dd><p>Skip over the next <em>n</em> rows.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>timeout</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.10)"><em>float</em></a>) – Optional timeout value in seconds.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A number of rows actually skipped over (&lt;= <em>n</em>).</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="connection-pools">
<span id="asyncpg-api-pool"></span><h2>Connection Pools<a class="headerlink" href="#connection-pools" title="Permalink to this headline">¶</a></h2>
<dl class="py function">
<dt class="sig sig-object py" id="asyncpg.pool.create_pool">
<span class="sig-name descname"><span class="pre">create_pool</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="pre">dsn=None</span></em>, <em class="sig-param"><span class="pre">*</span></em>, <em class="sig-param"><span class="pre">min_size=10</span></em>, <em class="sig-param"><span class="pre">max_size=10</span></em>, <em class="sig-param"><span class="pre">max_queries=50000</span></em>, <em class="sig-param"><span class="pre">max_inactive_connection_lifetime=300.0</span></em>, <em class="sig-param"><span class="pre">setup=None</span></em>, <em class="sig-param"><span class="pre">init=None</span></em>, <em class="sig-param"><span class="pre">loop=None</span></em>, <em class="sig-param"><span class="pre">connection_class=&lt;class</span> <span class="pre">'asyncpg.connection.Connection'&gt;</span></em>, <em class="sig-param"><span class="pre">record_class=&lt;class</span> <span class="pre">'asyncpg.Record'&gt;</span></em>, <em class="sig-param"><span class="pre">**connect_kwargs</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/asyncpg/pool.html#create_pool"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#asyncpg.pool.create_pool" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a connection pool.</p>
<p>Can be used either with an <code class="docutils literal notranslate"><span class="pre">async</span> <span class="pre">with</span></code> block:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">async</span> <span class="k">with</span> <span class="n">asyncpg</span><span class="o">.</span><span class="n">create_pool</span><span class="p">(</span><span class="n">user</span><span class="o">=</span><span class="s1">&#39;postgres&#39;</span><span class="p">,</span>
                               <span class="n">command_timeout</span><span class="o">=</span><span class="mi">60</span><span class="p">)</span> <span class="k">as</span> <span class="n">pool</span><span class="p">:</span>
    <span class="k">await</span> <span class="n">pool</span><span class="o">.</span><span class="n">fetch</span><span class="p">(</span><span class="s1">&#39;SELECT 1&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>Or to perform multiple operations on a single connection:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">async</span> <span class="k">with</span> <span class="n">asyncpg</span><span class="o">.</span><span class="n">create_pool</span><span class="p">(</span><span class="n">user</span><span class="o">=</span><span class="s1">&#39;postgres&#39;</span><span class="p">,</span>
                               <span class="n">command_timeout</span><span class="o">=</span><span class="mi">60</span><span class="p">)</span> <span class="k">as</span> <span class="n">pool</span><span class="p">:</span>
    <span class="k">async</span> <span class="k">with</span> <span class="n">pool</span><span class="o">.</span><span class="n">acquire</span><span class="p">()</span> <span class="k">as</span> <span class="n">con</span><span class="p">:</span>
        <span class="k">await</span> <span class="n">con</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s1">&#39;&#39;&#39;</span>
<span class="s1">           CREATE TABLE names (</span>
<span class="s1">              id serial PRIMARY KEY,</span>
<span class="s1">              name VARCHAR (255) NOT NULL)</span>
<span class="s1">        &#39;&#39;&#39;</span><span class="p">)</span>
        <span class="k">await</span> <span class="n">con</span><span class="o">.</span><span class="n">fetch</span><span class="p">(</span><span class="s1">&#39;SELECT 1&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>Or directly with <code class="docutils literal notranslate"><span class="pre">await</span></code> (not recommended):</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">pool</span> <span class="o">=</span> <span class="k">await</span> <span class="n">asyncpg</span><span class="o">.</span><span class="n">create_pool</span><span class="p">(</span><span class="n">user</span><span class="o">=</span><span class="s1">&#39;postgres&#39;</span><span class="p">,</span> <span class="n">command_timeout</span><span class="o">=</span><span class="mi">60</span><span class="p">)</span>
<span class="n">con</span> <span class="o">=</span> <span class="k">await</span> <span class="n">pool</span><span class="o">.</span><span class="n">acquire</span><span class="p">()</span>
<span class="k">try</span><span class="p">:</span>
    <span class="k">await</span> <span class="n">con</span><span class="o">.</span><span class="n">fetch</span><span class="p">(</span><span class="s1">&#39;SELECT 1&#39;</span><span class="p">)</span>
<span class="k">finally</span><span class="p">:</span>
    <span class="k">await</span> <span class="n">pool</span><span class="o">.</span><span class="n">release</span><span class="p">(</span><span class="n">con</span><span class="p">)</span>
</pre></div>
</div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Prepared statements and cursors returned by
<a class="reference internal" href="#asyncpg.connection.Connection.prepare" title="asyncpg.connection.Connection.prepare"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Connection.prepare()</span></code></a>
and <a class="reference internal" href="#asyncpg.connection.Connection.cursor" title="asyncpg.connection.Connection.cursor"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Connection.cursor()</span></code></a>
become invalid once the connection is released.  Likewise, all
notification and log listeners are removed, and <code class="docutils literal notranslate"><span class="pre">asyncpg</span></code> will
issue a warning if there are any listener callbacks registered on a
connection that is being released to the pool.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>dsn</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><em>str</em></a>) – Connection arguments specified using as a single string in
the following format:
<code class="docutils literal notranslate"><span class="pre">postgres://user:pass&#64;host:port/database?option=value</span></code>.</p></li>
<li><p><strong>**connect_kwargs</strong> – Keyword arguments for the <a class="reference internal" href="#asyncpg.connection.connect" title="asyncpg.connection.connect"><code class="xref py py-func docutils literal notranslate"><span class="pre">connect()</span></code></a>
function.</p></li>
<li><p><strong>connection_class</strong> (<a class="reference internal" href="#asyncpg.connection.Connection" title="asyncpg.connection.Connection"><em>Connection</em></a>) – The class to use for connections.  Must be a subclass of
<a class="reference internal" href="#asyncpg.connection.Connection" title="asyncpg.connection.Connection"><code class="xref py py-class docutils literal notranslate"><span class="pre">Connection</span></code></a>.</p></li>
<li><p><strong>record_class</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#type" title="(in Python v3.10)"><em>type</em></a>) – If specified, the class to use for records returned by queries on
the connections in this pool.  Must be a subclass of
<a class="reference internal" href="#asyncpg.Record" title="asyncpg.Record"><code class="xref py py-class docutils literal notranslate"><span class="pre">Record</span></code></a>.</p></li>
<li><p><strong>min_size</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)"><em>int</em></a>) – Number of connection the pool will be initialized with.</p></li>
<li><p><strong>max_size</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)"><em>int</em></a>) – Max number of connections in the pool.</p></li>
<li><p><strong>max_queries</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)"><em>int</em></a>) – Number of queries after a connection is closed and replaced
with a new connection.</p></li>
<li><p><strong>max_inactive_connection_lifetime</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.10)"><em>float</em></a>) – Number of seconds after which inactive connections in the
pool will be closed.  Pass <code class="docutils literal notranslate"><span class="pre">0</span></code> to disable this mechanism.</p></li>
<li><p><strong>setup</strong> (<em>coroutine</em>) – A coroutine to prepare a connection right before it is returned
from <code class="xref py py-meth docutils literal notranslate"><span class="pre">Pool.acquire()</span></code>.  An example use
case would be to automatically set up notifications listeners for
all connections of a pool.</p></li>
<li><p><strong>init</strong> (<em>coroutine</em>) – A coroutine to initialize a connection when it is created.
An example use case would be to setup type codecs with
<a class="reference internal" href="#asyncpg.connection.Connection.set_builtin_type_codec" title="asyncpg.connection.Connection.set_builtin_type_codec"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Connection.set_builtin_type_codec()</span></code></a>
or <a class="reference internal" href="#asyncpg.connection.Connection.set_type_codec" title="asyncpg.connection.Connection.set_type_codec"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Connection.set_type_codec()</span></code></a>.</p></li>
<li><p><strong>loop</strong> – An asyncio event loop instance.  If <code class="docutils literal notranslate"><span class="pre">None</span></code>, the default
event loop will be used.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>An instance of <a class="reference internal" href="#asyncpg.pool.Pool" title="asyncpg.pool.Pool"><code class="xref py py-class docutils literal notranslate"><span class="pre">Pool</span></code></a>.</p>
</dd>
</dl>
<div class="versionchanged">
<p><span class="versionmodified changed">Changed in version 0.10.0: </span>An <code class="xref py py-exc docutils literal notranslate"><span class="pre">InterfaceError</span></code> will be raised on any
attempted operation on a released connection.</p>
</div>
<div class="versionchanged">
<p><span class="versionmodified changed">Changed in version 0.13.0: </span>An <code class="xref py py-exc docutils literal notranslate"><span class="pre">InterfaceError</span></code> will be raised on any
attempted operation on a prepared statement or a cursor created
on a connection that has been released to the pool.</p>
</div>
<div class="versionchanged">
<p><span class="versionmodified changed">Changed in version 0.13.0: </span>An <code class="xref py py-exc docutils literal notranslate"><span class="pre">InterfaceWarning</span></code> will be produced
if there are any active listeners (added via
<a class="reference internal" href="#asyncpg.connection.Connection.add_listener" title="asyncpg.connection.Connection.add_listener"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Connection.add_listener()</span></code></a>
or <a class="reference internal" href="#asyncpg.connection.Connection.add_log_listener" title="asyncpg.connection.Connection.add_log_listener"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Connection.add_log_listener()</span></code></a>) present on the
connection at the moment of its release to the pool.</p>
</div>
<div class="versionchanged">
<p><span class="versionmodified changed">Changed in version 0.22.0: </span>Added the <em>record_class</em> parameter.</p>
</div>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="asyncpg.pool.Pool">
<em class="property"><span class="pre">class</span> </em><span class="sig-name descname"><span class="pre">Pool</span></span><a class="reference internal" href="../_modules/asyncpg/pool.html#Pool"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#asyncpg.pool.Pool" title="Permalink to this definition">¶</a></dt>
<dd><p>A connection pool.</p>
<p>Connection pool can be used to manage a set of connections to the database.
Connections are first acquired from the pool, then used, and then released
back to the pool.  Once a connection is released, it’s reset to close all
open cursors and other resources <em>except</em> prepared statements.</p>
<p>Pools are created by calling <a class="reference internal" href="#asyncpg.pool.create_pool" title="asyncpg.pool.create_pool"><code class="xref py py-func docutils literal notranslate"><span class="pre">create_pool()</span></code></a>.</p>
<dl class="py method">
<dt class="sig sig-object py" id="asyncpg.pool.Pool.acquire">
<span class="sig-name descname"><span class="pre">acquire</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">timeout</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/asyncpg/pool.html#Pool.acquire"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#asyncpg.pool.Pool.acquire" title="Permalink to this definition">¶</a></dt>
<dd><p>Acquire a database connection from the pool.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>timeout</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.10)"><em>float</em></a>) – A timeout for acquiring a Connection.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>An instance of <a class="reference internal" href="#asyncpg.connection.Connection" title="asyncpg.connection.Connection"><code class="xref py py-class docutils literal notranslate"><span class="pre">Connection</span></code></a>.</p>
</dd>
</dl>
<p>Can be used in an <code class="docutils literal notranslate"><span class="pre">await</span></code> expression or with an <code class="docutils literal notranslate"><span class="pre">async</span> <span class="pre">with</span></code> block.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">async</span> <span class="k">with</span> <span class="n">pool</span><span class="o">.</span><span class="n">acquire</span><span class="p">()</span> <span class="k">as</span> <span class="n">con</span><span class="p">:</span>
    <span class="k">await</span> <span class="n">con</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="o">...</span><span class="p">)</span>
</pre></div>
</div>
<p>Or:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">con</span> <span class="o">=</span> <span class="k">await</span> <span class="n">pool</span><span class="o">.</span><span class="n">acquire</span><span class="p">()</span>
<span class="k">try</span><span class="p">:</span>
    <span class="k">await</span> <span class="n">con</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="o">...</span><span class="p">)</span>
<span class="k">finally</span><span class="p">:</span>
    <span class="k">await</span> <span class="n">pool</span><span class="o">.</span><span class="n">release</span><span class="p">(</span><span class="n">con</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="asyncpg.pool.Pool.close">
<em class="property"><span class="pre">coroutine</span> </em><span class="sig-name descname"><span class="pre">close</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/asyncpg/pool.html#Pool.close"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#asyncpg.pool.Pool.close" title="Permalink to this definition">¶</a></dt>
<dd><p>Attempt to gracefully close all connections in the pool.</p>
<p>Wait until all pool connections are released, close them and
shut down the pool.  If any error (including cancellation) occurs
in <code class="docutils literal notranslate"><span class="pre">close()</span></code> the pool will terminate by calling
<code class="xref py py-meth docutils literal notranslate"><span class="pre">Pool.terminate()</span></code>.</p>
<p>It is advisable to use <a class="reference external" href="https://docs.python.org/3/library/asyncio-task.html#asyncio.wait_for" title="(in Python v3.10)"><code class="docutils literal notranslate"><span class="pre">asyncio.wait_for()</span></code></a> to set
a timeout.</p>
<div class="versionchanged">
<p><span class="versionmodified changed">Changed in version 0.16.0: </span><code class="docutils literal notranslate"><span class="pre">close()</span></code> now waits until all pool connections are released
before closing them and the pool.  Errors raised in <code class="docutils literal notranslate"><span class="pre">close()</span></code>
will cause immediate pool termination.</p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="asyncpg.pool.Pool.copy_from_query">
<em class="property"><span class="pre">coroutine</span> </em><span class="sig-name descname"><span class="pre">copy_from_query</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">query</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">output</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">timeout</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">format</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">oids</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">delimiter</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">null</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">header</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">quote</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">escape</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">force_quote</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">encoding</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/asyncpg/pool.html#Pool.copy_from_query"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#asyncpg.pool.Pool.copy_from_query" title="Permalink to this definition">¶</a></dt>
<dd><p>Copy the results of a query to a file or file-like object.</p>
<p>Pool performs this operation using one of its connections.  Other than
that, it behaves identically to
<a class="reference internal" href="#asyncpg.connection.Connection.copy_from_query" title="asyncpg.connection.Connection.copy_from_query"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Connection.copy_from_query()</span></code></a>.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 0.24.0.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="asyncpg.pool.Pool.copy_from_table">
<em class="property"><span class="pre">coroutine</span> </em><span class="sig-name descname"><span class="pre">copy_from_table</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">table_name</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">output</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">columns</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">schema_name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">timeout</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">format</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">oids</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">delimiter</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">null</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">header</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">quote</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">escape</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">force_quote</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">encoding</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/asyncpg/pool.html#Pool.copy_from_table"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#asyncpg.pool.Pool.copy_from_table" title="Permalink to this definition">¶</a></dt>
<dd><p>Copy table contents to a file or file-like object.</p>
<p>Pool performs this operation using one of its connections.  Other than
that, it behaves identically to
<a class="reference internal" href="#asyncpg.connection.Connection.copy_from_table" title="asyncpg.connection.Connection.copy_from_table"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Connection.copy_from_table()</span></code></a>.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 0.24.0.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="asyncpg.pool.Pool.copy_records_to_table">
<em class="property"><span class="pre">coroutine</span> </em><span class="sig-name descname"><span class="pre">copy_records_to_table</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">table_name</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">records</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">columns</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">schema_name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">timeout</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/asyncpg/pool.html#Pool.copy_records_to_table"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#asyncpg.pool.Pool.copy_records_to_table" title="Permalink to this definition">¶</a></dt>
<dd><p>Copy a list of records to the specified table using binary COPY.</p>
<p>Pool performs this operation using one of its connections.  Other than
that, it behaves identically to
<a class="reference internal" href="#asyncpg.connection.Connection.copy_records_to_table" title="asyncpg.connection.Connection.copy_records_to_table"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Connection.copy_records_to_table()</span></code></a>.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 0.24.0.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="asyncpg.pool.Pool.copy_to_table">
<em class="property"><span class="pre">coroutine</span> </em><span class="sig-name descname"><span class="pre">copy_to_table</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">table_name</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">source</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">columns</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">schema_name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">timeout</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">format</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">oids</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">freeze</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">delimiter</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">null</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">header</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">quote</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">escape</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">force_quote</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">force_not_null</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">force_null</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">encoding</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/asyncpg/pool.html#Pool.copy_to_table"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#asyncpg.pool.Pool.copy_to_table" title="Permalink to this definition">¶</a></dt>
<dd><p>Copy data to the specified table.</p>
<p>Pool performs this operation using one of its connections.  Other than
that, it behaves identically to
<a class="reference internal" href="#asyncpg.connection.Connection.copy_to_table" title="asyncpg.connection.Connection.copy_to_table"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Connection.copy_to_table()</span></code></a>.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 0.24.0.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="asyncpg.pool.Pool.execute">
<em class="property"><span class="pre">coroutine</span> </em><span class="sig-name descname"><span class="pre">execute</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">query</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><span class="pre">str</span></a></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">timeout</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.10)"><span class="pre">float</span></a><span class="p"><span class="pre">]</span></span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><span class="pre">str</span></a></span></span><a class="reference internal" href="../_modules/asyncpg/pool.html#Pool.execute"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#asyncpg.pool.Pool.execute" title="Permalink to this definition">¶</a></dt>
<dd><p>Execute an SQL command (or commands).</p>
<p>Pool performs this operation using one of its connections.  Other than
that, it behaves identically to
<a class="reference internal" href="#asyncpg.connection.Connection.execute" title="asyncpg.connection.Connection.execute"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Connection.execute()</span></code></a>.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 0.10.0.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="asyncpg.pool.Pool.executemany">
<em class="property"><span class="pre">coroutine</span> </em><span class="sig-name descname"><span class="pre">executemany</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">command</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><span class="pre">str</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">timeout</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.10)"><span class="pre">float</span></a><span class="p"><span class="pre">]</span></span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/asyncpg/pool.html#Pool.executemany"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#asyncpg.pool.Pool.executemany" title="Permalink to this definition">¶</a></dt>
<dd><p>Execute an SQL <em>command</em> for each sequence of arguments in <em>args</em>.</p>
<p>Pool performs this operation using one of its connections.  Other than
that, it behaves identically to
<a class="reference internal" href="#asyncpg.connection.Connection.executemany" title="asyncpg.connection.Connection.executemany"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Connection.executemany()</span></code></a>.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 0.10.0.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="asyncpg.pool.Pool.expire_connections">
<em class="property"><span class="pre">coroutine</span> </em><span class="sig-name descname"><span class="pre">expire_connections</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/asyncpg/pool.html#Pool.expire_connections"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#asyncpg.pool.Pool.expire_connections" title="Permalink to this definition">¶</a></dt>
<dd><p>Expire all currently open connections.</p>
<p>Cause all currently open connections to get replaced on the
next <a class="reference internal" href="#asyncpg.pool.Pool.acquire" title="asyncpg.pool.Pool.acquire"><code class="xref py py-meth docutils literal notranslate"><span class="pre">acquire()</span></code></a> call.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 0.16.0.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="asyncpg.pool.Pool.fetch">
<em class="property"><span class="pre">coroutine</span> </em><span class="sig-name descname"><span class="pre">fetch</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">query</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">timeout</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">record_class</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.10)"><span class="pre">list</span></a></span></span><a class="reference internal" href="../_modules/asyncpg/pool.html#Pool.fetch"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#asyncpg.pool.Pool.fetch" title="Permalink to this definition">¶</a></dt>
<dd><p>Run a query and return the results as a list of <code class="xref py py-class docutils literal notranslate"><span class="pre">Record</span></code>.</p>
<p>Pool performs this operation using one of its connections.  Other than
that, it behaves identically to
<a class="reference internal" href="#asyncpg.connection.Connection.fetch" title="asyncpg.connection.Connection.fetch"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Connection.fetch()</span></code></a>.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 0.10.0.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="asyncpg.pool.Pool.fetchrow">
<em class="property"><span class="pre">coroutine</span> </em><span class="sig-name descname"><span class="pre">fetchrow</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">query</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">timeout</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">record_class</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/asyncpg/pool.html#Pool.fetchrow"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#asyncpg.pool.Pool.fetchrow" title="Permalink to this definition">¶</a></dt>
<dd><p>Run a query and return the first row.</p>
<p>Pool performs this operation using one of its connections.  Other than
that, it behaves identically to
<a class="reference internal" href="#asyncpg.connection.Connection.fetchrow" title="asyncpg.connection.Connection.fetchrow"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Connection.fetchrow()</span></code></a>.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 0.10.0.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="asyncpg.pool.Pool.fetchval">
<em class="property"><span class="pre">coroutine</span> </em><span class="sig-name descname"><span class="pre">fetchval</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">query</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">column</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">timeout</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/asyncpg/pool.html#Pool.fetchval"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#asyncpg.pool.Pool.fetchval" title="Permalink to this definition">¶</a></dt>
<dd><p>Run a query and return a value in the first row.</p>
<p>Pool performs this operation using one of its connections.  Other than
that, it behaves identically to
<a class="reference internal" href="#asyncpg.connection.Connection.fetchval" title="asyncpg.connection.Connection.fetchval"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Connection.fetchval()</span></code></a>.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 0.10.0.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="asyncpg.pool.Pool.get_idle_size">
<span class="sig-name descname"><span class="pre">get_idle_size</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/asyncpg/pool.html#Pool.get_idle_size"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#asyncpg.pool.Pool.get_idle_size" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the current number of idle connections in this pool.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 0.25.0.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="asyncpg.pool.Pool.get_max_size">
<span class="sig-name descname"><span class="pre">get_max_size</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/asyncpg/pool.html#Pool.get_max_size"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#asyncpg.pool.Pool.get_max_size" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the maximum allowed number of connections in this pool.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 0.25.0.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="asyncpg.pool.Pool.get_min_size">
<span class="sig-name descname"><span class="pre">get_min_size</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/asyncpg/pool.html#Pool.get_min_size"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#asyncpg.pool.Pool.get_min_size" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the minimum number of connections in this pool.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 0.25.0.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="asyncpg.pool.Pool.get_size">
<span class="sig-name descname"><span class="pre">get_size</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/asyncpg/pool.html#Pool.get_size"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#asyncpg.pool.Pool.get_size" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the current number of connections in this pool.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 0.25.0.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="asyncpg.pool.Pool.release">
<em class="property"><span class="pre">coroutine</span> </em><span class="sig-name descname"><span class="pre">release</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">connection</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">timeout</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/asyncpg/pool.html#Pool.release"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#asyncpg.pool.Pool.release" title="Permalink to this definition">¶</a></dt>
<dd><p>Release a database connection back to the pool.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>connection</strong> (<a class="reference internal" href="#asyncpg.connection.Connection" title="asyncpg.connection.Connection"><em>Connection</em></a>) – A <a class="reference internal" href="#asyncpg.connection.Connection" title="asyncpg.connection.Connection"><code class="xref py py-class docutils literal notranslate"><span class="pre">Connection</span></code></a> object to release.</p></li>
<li><p><strong>timeout</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.10)"><em>float</em></a>) – A timeout for releasing the connection.  If not specified, defaults
to the timeout provided in the corresponding call to the
<a class="reference internal" href="#asyncpg.pool.Pool.acquire" title="asyncpg.pool.Pool.acquire"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Pool.acquire()</span></code></a> method.</p></li>
</ul>
</dd>
</dl>
<div class="versionchanged">
<p><span class="versionmodified changed">Changed in version 0.14.0: </span>Added the <em>timeout</em> parameter.</p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="asyncpg.pool.Pool.set_connect_args">
<span class="sig-name descname"><span class="pre">set_connect_args</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dsn</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">connect_kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/asyncpg/pool.html#Pool.set_connect_args"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#asyncpg.pool.Pool.set_connect_args" title="Permalink to this definition">¶</a></dt>
<dd><p>Set the new connection arguments for this pool.</p>
<p>The new connection arguments will be used for all subsequent
new connection attempts.  Existing connections will remain until
they expire. Use <a class="reference internal" href="#asyncpg.pool.Pool.expire_connections" title="asyncpg.pool.Pool.expire_connections"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Pool.expire_connections()</span></code></a> to expedite the connection
expiry.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>dsn</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><em>str</em></a>) – Connection arguments specified using as a single string in
the following format:
<code class="docutils literal notranslate"><span class="pre">postgres://user:pass&#64;host:port/database?option=value</span></code>.</p></li>
<li><p><strong>**connect_kwargs</strong> – Keyword arguments for the <a class="reference internal" href="#asyncpg.connection.connect" title="asyncpg.connection.connect"><code class="xref py py-func docutils literal notranslate"><span class="pre">connect()</span></code></a>
function.</p></li>
</ul>
</dd>
</dl>
<div class="versionadded">
<p><span class="versionmodified added">New in version 0.16.0.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="asyncpg.pool.Pool.terminate">
<span class="sig-name descname"><span class="pre">terminate</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/asyncpg/pool.html#Pool.terminate"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#asyncpg.pool.Pool.terminate" title="Permalink to this definition">¶</a></dt>
<dd><p>Terminate all connections in the pool.</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="record-objects">
<span id="asyncpg-api-record"></span><h2>Record Objects<a class="headerlink" href="#record-objects" title="Permalink to this headline">¶</a></h2>
<p>Each row (or composite type value) returned by calls to <code class="docutils literal notranslate"><span class="pre">fetch*</span></code> methods
is represented by an instance of the <a class="reference internal" href="#asyncpg.Record" title="asyncpg.Record"><code class="xref py py-class docutils literal notranslate"><span class="pre">Record</span></code></a> object.
<code class="docutils literal notranslate"><span class="pre">Record</span></code> objects are a tuple-/dict-like hybrid, and allow addressing of
items either by a numeric index or by a field name:</p>
<div class="highlight-pycon notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">asyncpg</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">asyncio</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">loop</span> <span class="o">=</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">get_event_loop</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">conn</span> <span class="o">=</span> <span class="n">loop</span><span class="o">.</span><span class="n">run_until_complete</span><span class="p">(</span><span class="n">asyncpg</span><span class="o">.</span><span class="n">connect</span><span class="p">())</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">r</span> <span class="o">=</span> <span class="n">loop</span><span class="o">.</span><span class="n">run_until_complete</span><span class="p">(</span><span class="n">conn</span><span class="o">.</span><span class="n">fetchrow</span><span class="p">(</span><span class="s1">&#39;&#39;&#39;</span>
<span class="gp">... </span><span class="s1">    SELECT oid, rolname, rolsuper FROM pg_roles WHERE rolname = user&#39;&#39;&#39;</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">r</span>
<span class="go">&lt;Record oid=16388 rolname=&#39;elvis&#39; rolsuper=True&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">r</span><span class="p">[</span><span class="s1">&#39;oid&#39;</span><span class="p">]</span>
<span class="go">16388</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">r</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<span class="go">16388</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">dict</span><span class="p">(</span><span class="n">r</span><span class="p">)</span>
<span class="go">{&#39;oid&#39;: 16388, &#39;rolname&#39;: &#39;elvis&#39;, &#39;rolsuper&#39;: True}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">tuple</span><span class="p">(</span><span class="n">r</span><span class="p">)</span>
<span class="go">(16388, &#39;elvis&#39;, True)</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p><code class="docutils literal notranslate"><span class="pre">Record</span></code> objects currently cannot be created from Python code.</p>
</div>
<dl class="py class">
<dt class="sig sig-object py" id="asyncpg.Record">
<em class="property"><span class="pre">class</span> </em><span class="sig-name descname"><span class="pre">Record</span></span><a class="headerlink" href="#asyncpg.Record" title="Permalink to this definition">¶</a></dt>
<dd><p>A read-only representation of PostgreSQL row.</p>
<dl class="describe">
<dt class="sig sig-object">
<span class="sig-name descname"><span class="pre">len(r)</span></span></dt>
<dd><p>Return the number of fields in record <em>r</em>.</p>
</dd></dl>

<dl class="describe">
<dt class="sig sig-object">
<span class="sig-name descname"><span class="pre">r[field]</span></span></dt>
<dd><p>Return the field of <em>r</em> with field name or index <em>field</em>.</p>
</dd></dl>

<dl class="describe">
<dt class="sig sig-object">
<span class="sig-name descname"><span class="pre">name</span> <span class="pre">in</span> <span class="pre">r</span></span></dt>
<dd><p>Return <code class="docutils literal notranslate"><span class="pre">True</span></code> if record <em>r</em> has a field named <em>name</em>.</p>
</dd></dl>

<dl class="describe">
<dt class="sig sig-object">
<span class="sig-name descname"><span class="pre">iter(r)</span></span></dt>
<dd><p>Return an iterator over the <em>values</em> of the record <em>r</em>.</p>
</dd></dl>

<dl class="describe">
<dt class="sig sig-object">
<span class="sig-name descname"><span class="pre">get(name[,</span> <span class="pre">default])</span></span></dt>
<dd><p>Return the value for <em>name</em> if the record has a field named <em>name</em>,
else return <em>default</em>. If <em>default</em> is not given, return <code class="docutils literal notranslate"><span class="pre">None</span></code>.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 0.18.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="asyncpg.Record.values">
<span class="sig-name descname"><span class="pre">values</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#asyncpg.Record.values" title="Permalink to this definition">¶</a></dt>
<dd><p>Return an iterator over the record values.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="asyncpg.Record.keys">
<span class="sig-name descname"><span class="pre">keys</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#asyncpg.Record.keys" title="Permalink to this definition">¶</a></dt>
<dd><p>Return an iterator over the record field names.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="asyncpg.Record.items">
<span class="sig-name descname"><span class="pre">items</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#asyncpg.Record.items" title="Permalink to this definition">¶</a></dt>
<dd><p>Return an iterator over <code class="docutils literal notranslate"><span class="pre">(field,</span> <span class="pre">value)</span></code> pairs.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="asyncpg.ConnectionSettings">
<em class="property"><span class="pre">class</span> </em><span class="sig-name descname"><span class="pre">ConnectionSettings</span></span><a class="headerlink" href="#asyncpg.ConnectionSettings" title="Permalink to this definition">¶</a></dt>
<dd><p>A read-only collection of Connection settings.</p>
<dl class="describe">
<dt class="sig sig-object">
<span class="sig-name descname"><span class="pre">settings.setting_name</span></span></dt>
<dd><p>Return the value of the “setting_name” setting.  Raises an
<code class="docutils literal notranslate"><span class="pre">AttributeError</span></code> if the setting is not defined.</p>
<p>Example:</p>
<div class="highlight-pycon notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">connection</span><span class="o">.</span><span class="n">get_settings</span><span class="p">()</span><span class="o">.</span><span class="n">client_encoding</span>
<span class="go">&#39;UTF8&#39;</span>
</pre></div>
</div>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module-asyncpg.types">
<span id="data-types"></span><h2>Data Types<a class="headerlink" href="#module-asyncpg.types" title="Permalink to this headline">¶</a></h2>
<dl class="py class">
<dt class="sig sig-object py" id="asyncpg.types.Attribute">
<em class="property"><span class="pre">class</span> </em><span class="sig-name descname"><span class="pre">Attribute</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">type</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#asyncpg.types.Attribute" title="Permalink to this definition">¶</a></dt>
<dd><p>Database relation attribute.</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="asyncpg.types.Attribute.name">
<span class="sig-name descname"><span class="pre">name</span></span><a class="headerlink" href="#asyncpg.types.Attribute.name" title="Permalink to this definition">¶</a></dt>
<dd><p>Attribute name.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="asyncpg.types.Attribute.type">
<span class="sig-name descname"><span class="pre">type</span></span><a class="headerlink" href="#asyncpg.types.Attribute.type" title="Permalink to this definition">¶</a></dt>
<dd><p>Attribute data type <a class="reference internal" href="#asyncpg.types.Type" title="asyncpg.types.Type"><code class="xref py py-class docutils literal notranslate"><span class="pre">asyncpg.types.Type</span></code></a>.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="asyncpg.types.BitString">
<em class="property"><span class="pre">class</span> </em><span class="sig-name descname"><span class="pre">BitString</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">bitstring</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#bytes" title="(in Python v3.10)"><span class="pre">bytes</span></a><span class="p"><span class="pre">]</span></span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/asyncpg/pgproto/types.html#BitString"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#asyncpg.types.BitString" title="Permalink to this definition">¶</a></dt>
<dd><p>Immutable representation of PostgreSQL <cite>bit</cite> and <cite>varbit</cite> types.</p>
<dl class="py method">
<dt class="sig sig-object py" id="asyncpg.types.BitString.from_int">
<em class="property"><span class="pre">classmethod</span> </em><span class="sig-name descname"><span class="pre">from_int</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">x</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)"><span class="pre">int</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">length</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)"><span class="pre">int</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">bitorder</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Literal</span><span class="p"><span class="pre">[</span></span><span class="pre">big</span><span class="p"><span class="pre">,</span> </span><span class="pre">little</span><span class="p"><span class="pre">]</span></span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">'big'</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">signed</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.10)"><span class="pre">bool</span></a></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">asyncpg.pgproto.types._BitString</span></span></span><a class="reference internal" href="../_modules/asyncpg/pgproto/types.html#BitString.from_int"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#asyncpg.types.BitString.from_int" title="Permalink to this definition">¶</a></dt>
<dd><p>Represent the Python int x as a BitString.
Acts similarly to int.to_bytes.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>x</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)"><em>int</em></a>) – An integer to represent. Negative integers are represented in two’s
complement form, unless the argument signed is False, in which case
negative integers raise an OverflowError.</p></li>
<li><p><strong>length</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)"><em>int</em></a>) – The length of the resulting BitString. An OverflowError is raised
if the integer is not representable in this many bits.</p></li>
<li><p><strong>bitorder</strong> – Determines the bit order used in the BitString representation. By
default, this function uses Postgres conventions for casting ints
to bits. If bitorder is ‘big’, the most significant bit is at the
start of the string (this is the same as the default). If bitorder
is ‘little’, the most significant bit is at the end of the string.</p></li>
<li><p><strong>signed</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.10)"><em>bool</em></a>) – Determines whether two’s complement is used in the BitString
representation. If signed is False and a negative integer is given,
an OverflowError is raised.</p></li>
</ul>
</dd>
<dt class="field-even">Return BitString</dt>
<dd class="field-even"><p>A BitString representing the input integer, in the
form specified by the other input args.</p>
</dd>
</dl>
<div class="versionadded">
<p><span class="versionmodified added">New in version 0.18.0.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="asyncpg.types.BitString.to_int">
<span class="sig-name descname"><span class="pre">to_int</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">bitorder</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Literal</span><span class="p"><span class="pre">[</span></span><span class="pre">big</span><span class="p"><span class="pre">,</span> </span><span class="pre">little</span><span class="p"><span class="pre">]</span></span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">'big'</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">signed</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.10)"><span class="pre">bool</span></a></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)"><span class="pre">int</span></a></span></span><a class="reference internal" href="../_modules/asyncpg/pgproto/types.html#BitString.to_int"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#asyncpg.types.BitString.to_int" title="Permalink to this definition">¶</a></dt>
<dd><p>Interpret the BitString as a Python int.
Acts similarly to int.from_bytes.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>bitorder</strong> – Determines the bit order used to interpret the BitString. By
default, this function uses Postgres conventions for casting bits
to ints. If bitorder is ‘big’, the most significant bit is at the
start of the string (this is the same as the default). If bitorder
is ‘little’, the most significant bit is at the end of the string.</p></li>
<li><p><strong>signed</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.10)"><em>bool</em></a>) – Determines whether two’s complement is used to interpret the
BitString. If signed is False, the returned value is always
non-negative.</p></li>
</ul>
</dd>
<dt class="field-even">Return int</dt>
<dd class="field-even"><p>An integer representing the BitString. Information about
the BitString’s exact length is lost.</p>
</dd>
</dl>
<div class="versionadded">
<p><span class="versionmodified added">New in version 0.18.0.</span></p>
</div>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="asyncpg.types.Box">
<em class="property"><span class="pre">class</span> </em><span class="sig-name descname"><span class="pre">Box</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">high</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Sequence</span><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.10)"><span class="pre">float</span></a><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">low</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Sequence</span><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.10)"><span class="pre">float</span></a><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/asyncpg/pgproto/types.html#Box"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#asyncpg.types.Box" title="Permalink to this definition">¶</a></dt>
<dd><p>Immutable representation of PostgreSQL <cite>box</cite> type.</p>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="asyncpg.types.Circle">
<em class="property"><span class="pre">class</span> </em><span class="sig-name descname"><span class="pre">Circle</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">center</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><a class="reference internal" href="#asyncpg.types.Point" title="asyncpg.pgproto.types.Point"><span class="pre">asyncpg.pgproto.types.Point</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">radius</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.10)"><span class="pre">float</span></a></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/asyncpg/pgproto/types.html#Circle"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#asyncpg.types.Circle" title="Permalink to this definition">¶</a></dt>
<dd><p>Immutable representation of PostgreSQL <cite>circle</cite> type.</p>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="asyncpg.types.Line">
<em class="property"><span class="pre">class</span> </em><span class="sig-name descname"><span class="pre">Line</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">A</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.10)"><span class="pre">float</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">B</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.10)"><span class="pre">float</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">C</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.10)"><span class="pre">float</span></a></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/asyncpg/pgproto/types.html#Line"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#asyncpg.types.Line" title="Permalink to this definition">¶</a></dt>
<dd><p>Immutable representation of PostgreSQL <cite>line</cite> type.</p>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="asyncpg.types.LineSegment">
<em class="property"><span class="pre">class</span> </em><span class="sig-name descname"><span class="pre">LineSegment</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">p1</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Sequence</span><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.10)"><span class="pre">float</span></a><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">p2</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Sequence</span><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.10)"><span class="pre">float</span></a><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/asyncpg/pgproto/types.html#LineSegment"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#asyncpg.types.LineSegment" title="Permalink to this definition">¶</a></dt>
<dd><p>Immutable representation of PostgreSQL <cite>lseg</cite> type.</p>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="asyncpg.types.Path">
<em class="property"><span class="pre">class</span> </em><span class="sig-name descname"><span class="pre">Path</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">points</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Sequence</span><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.10)"><span class="pre">float</span></a><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">is_closed</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.10)"><span class="pre">bool</span></a></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/asyncpg/pgproto/types.html#Path"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#asyncpg.types.Path" title="Permalink to this definition">¶</a></dt>
<dd><p>Immutable representation of PostgreSQL <cite>path</cite> type.</p>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="asyncpg.types.Point">
<em class="property"><span class="pre">class</span> </em><span class="sig-name descname"><span class="pre">Point</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">x</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Union</span><span class="p"><span class="pre">[</span></span><span class="pre">SupportsFloat</span><span class="p"><span class="pre">,</span> </span><span class="pre">SupportsIndex</span><span class="p"><span class="pre">,</span> </span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><span class="pre">str</span></a><span class="p"><span class="pre">,</span> </span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#bytes" title="(in Python v3.10)"><span class="pre">bytes</span></a><span class="p"><span class="pre">,</span> </span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#bytearray" title="(in Python v3.10)"><span class="pre">bytearray</span></a><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">y</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Union</span><span class="p"><span class="pre">[</span></span><span class="pre">SupportsFloat</span><span class="p"><span class="pre">,</span> </span><span class="pre">SupportsIndex</span><span class="p"><span class="pre">,</span> </span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><span class="pre">str</span></a><span class="p"><span class="pre">,</span> </span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#bytes" title="(in Python v3.10)"><span class="pre">bytes</span></a><span class="p"><span class="pre">,</span> </span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#bytearray" title="(in Python v3.10)"><span class="pre">bytearray</span></a><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/asyncpg/pgproto/types.html#Point"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#asyncpg.types.Point" title="Permalink to this definition">¶</a></dt>
<dd><p>Immutable representation of PostgreSQL <cite>point</cite> type.</p>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="asyncpg.types.Polygon">
<em class="property"><span class="pre">class</span> </em><span class="sig-name descname"><span class="pre">Polygon</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">points</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Sequence</span><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.10)"><span class="pre">float</span></a><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/asyncpg/pgproto/types.html#Polygon"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#asyncpg.types.Polygon" title="Permalink to this definition">¶</a></dt>
<dd><p>Immutable representation of PostgreSQL <cite>polygon</cite> type.</p>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="asyncpg.types.Range">
<em class="property"><span class="pre">class</span> </em><span class="sig-name descname"><span class="pre">Range</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">lower</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">upper</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">lower_inc</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">upper_inc</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">empty</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/asyncpg/types.html#Range"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#asyncpg.types.Range" title="Permalink to this definition">¶</a></dt>
<dd><p>Immutable representation of PostgreSQL <cite>range</cite> type.</p>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="asyncpg.types.ServerVersion">
<em class="property"><span class="pre">class</span> </em><span class="sig-name descname"><span class="pre">ServerVersion</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">major</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">minor</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">micro</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">releaselevel</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">serial</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#asyncpg.types.ServerVersion" title="Permalink to this definition">¶</a></dt>
<dd><p>PostgreSQL server version tuple.</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="asyncpg.types.ServerVersion.major">
<span class="sig-name descname"><span class="pre">major</span></span><a class="headerlink" href="#asyncpg.types.ServerVersion.major" title="Permalink to this definition">¶</a></dt>
<dd><p>Alias for field number 0</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="asyncpg.types.ServerVersion.micro">
<span class="sig-name descname"><span class="pre">micro</span></span><a class="headerlink" href="#asyncpg.types.ServerVersion.micro" title="Permalink to this definition">¶</a></dt>
<dd><p>Alias for field number 2</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="asyncpg.types.ServerVersion.minor">
<span class="sig-name descname"><span class="pre">minor</span></span><a class="headerlink" href="#asyncpg.types.ServerVersion.minor" title="Permalink to this definition">¶</a></dt>
<dd><p>Alias for field number 1</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="asyncpg.types.ServerVersion.releaselevel">
<span class="sig-name descname"><span class="pre">releaselevel</span></span><a class="headerlink" href="#asyncpg.types.ServerVersion.releaselevel" title="Permalink to this definition">¶</a></dt>
<dd><p>Alias for field number 3</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="asyncpg.types.ServerVersion.serial">
<span class="sig-name descname"><span class="pre">serial</span></span><a class="headerlink" href="#asyncpg.types.ServerVersion.serial" title="Permalink to this definition">¶</a></dt>
<dd><p>Alias for field number 4</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="asyncpg.types.Type">
<em class="property"><span class="pre">class</span> </em><span class="sig-name descname"><span class="pre">Type</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">oid</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">kind</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">schema</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#asyncpg.types.Type" title="Permalink to this definition">¶</a></dt>
<dd><p>Database data type.</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="asyncpg.types.Type.kind">
<span class="sig-name descname"><span class="pre">kind</span></span><a class="headerlink" href="#asyncpg.types.Type.kind" title="Permalink to this definition">¶</a></dt>
<dd><p>Type kind.  Can be “scalar”, “array”, “composite” or “range”.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="asyncpg.types.Type.name">
<span class="sig-name descname"><span class="pre">name</span></span><a class="headerlink" href="#asyncpg.types.Type.name" title="Permalink to this definition">¶</a></dt>
<dd><p>Type name.  For example “int2”.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="asyncpg.types.Type.oid">
<span class="sig-name descname"><span class="pre">oid</span></span><a class="headerlink" href="#asyncpg.types.Type.oid" title="Permalink to this definition">¶</a></dt>
<dd><p>OID of the type.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="asyncpg.types.Type.schema">
<span class="sig-name descname"><span class="pre">schema</span></span><a class="headerlink" href="#asyncpg.types.Type.schema" title="Permalink to this definition">¶</a></dt>
<dd><p>Name of the database schema that defines the type.</p>
</dd></dl>

</dd></dl>

</div>
</div>


           </div>
           
          </div>
          <footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
        <a href="../faq.html" class="btn btn-neutral float-right" title="Frequently Asked Questions" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
        <a href="../usage.html" class="btn btn-neutral float-left" title="asyncpg Usage" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright 2016-present, the asyncpg authors and contributors.

    </p>
  </div> 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>